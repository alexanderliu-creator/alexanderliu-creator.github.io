

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/tuzi.png">
  <link rel="icon" href="/img/tuzi.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Alexander Liu">
  <meta name="keywords" content="分布式系统,后端研发,数据协同">
  
    <meta name="description" content="Java高频考点   1. 局部变量表和计算栈 非常有意思的一道题目嗷！！！  知识点在于栈，局部变量表等东西的操作嗷，类似于Println和符号运算这样的操作。本质上，都是先把操作数放在栈里面，然后对于栈里面的数字进行操作的。 然后就是++这样的操作，在前在后，对于局部变量表操作和栈操作的顺序是不一样的嗷！！！  2. Singleton示例 单例，系统中只有一个实例对象可以被获取和使用的代码模">
<meta property="og:type" content="article">
<meta property="og:title" content="Java常问面试题总结与提高">
<meta property="og:url" content="http://example.com/2021/08/05/java-da-han-chang-wen-mian-shi-ti/index.html">
<meta property="og:site_name" content="兔の博客">
<meta property="og:description" content="Java高频考点   1. 局部变量表和计算栈 非常有意思的一道题目嗷！！！  知识点在于栈，局部变量表等东西的操作嗷，类似于Println和符号运算这样的操作。本质上，都是先把操作数放在栈里面，然后对于栈里面的数字进行操作的。 然后就是++这样的操作，在前在后，对于局部变量表操作和栈操作的顺序是不一样的嗷！！！  2. Singleton示例 单例，系统中只有一个实例对象可以被获取和使用的代码模">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210805214421.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210805214638.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210805214700.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829092913.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829163721.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829164100.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829163830.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829164212.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210901222143.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210808083346.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913190045.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210808083024.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913192205.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913192013.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913192921.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913193550.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914182640.png">
<meta property="og:image" content="c:/Users/Alexander/AppData/Roaming/Typora/typora-user-images/image-20210913194820605.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913200926.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913201109.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913201109.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914183439.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914183722.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914184250.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914184532.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914190803.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914190825.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914191644.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914191909.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914192042.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914192335.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914215818.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914220153.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914220305.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914221952.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915200923.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915203909.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915204001.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915204430.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915210514.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915204815.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915204846.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915205140.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915205210.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915210029.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915210105.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915210928.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915211451.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915211620.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915211826.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915211803.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915212240.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915215803.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915215840.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915220409.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915220950.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915221301.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915221459.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210916201751.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210916202040.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210916202204.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210916202314.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917110338.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917112125.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917112154.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917112350.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917113302.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917114858.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917115028.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917115117.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917115228.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917144338.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917144706.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917145654.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917145712.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917192349.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917192442.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917192507.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917192913.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917213941.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917214504.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917214652.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917214711.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918202929.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918203703.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918210748.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918212212.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918213531.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920151235.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920151426.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920154316.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920154710.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163453.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920162740.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920162759.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920162925.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163118.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163153.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163734.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163752.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163820.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920164039.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920203544.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920203809.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920204832.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920210510.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920211449.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920211539.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920212314.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920212414.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920213917.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920214035.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920211802.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920211826.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920214706.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920215354.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920215528.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920220626.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920220647.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920221006.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920222052.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920222340.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920222637.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922204116.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922204138.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205326.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922204836.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205103.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205201.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205724.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205901.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922210038.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922210553.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922215608.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922210932.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211038.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211115.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211133.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211556.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922212646.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211446.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922212743.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922212834.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213125.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213147.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213252.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213407.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213709.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213921.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922214035.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922214901.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922215640.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922215725.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922215803.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922220037.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922220932.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922220945.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922221211.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923085939.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923090428.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923090141.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923090542.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923090615.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923091333.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923091427.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923091541.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923091733.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923092140.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923092248.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923092536.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923092916.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093114.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093152.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093223.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093335.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093511.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923182346.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923182405.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923182945.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923183152.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923183235.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923185443.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923185749.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923185951.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923190031.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923190412.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923190911.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191004.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191149.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191208.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191308.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923192051.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191526.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191539.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194114.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194648.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194711.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194905.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194930.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923195019.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923200814.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923200755.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923201325.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923201500.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923201825.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924203911.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204413.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204613.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204801.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204859.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204932.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924205022.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924205328.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924210445.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924210625.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924210648.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924211359.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924211557.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924213350.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924213444.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924213507.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924214305.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924215151.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924220700.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924221132.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925150440.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925150525.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925150621.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925150910.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925151016.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925151905.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925151930.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925152550.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925152745.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153059.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153238.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153256.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153851.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153935.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925154143.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925154304.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925155113.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925155942.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925160146.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925160643.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925161602.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925161807.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925162131.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925162840.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163018.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163201.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163326.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163434.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163508.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925172206.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925172228.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163901.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925170643.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925170707.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925170740.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925171346.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925171053.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925171123.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925171815.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925172417.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925172835.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925173108.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926191656.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926191729.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926191942.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926192932.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926193156.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926193424.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926193704.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926194304.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926194412.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926194432.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926194520.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926195230.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926200212.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926200313.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926201513.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926202106.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926202244.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926202753.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926203030.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926203218.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926203425.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926204128.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926204426.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926205055.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926205131.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926205849.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210927102201.png">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210927102957.png">
<meta property="article:published_time" content="2021-08-05T13:38:05.000Z">
<meta property="article:modified_time" content="2021-10-12T02:36:28.000Z">
<meta property="article:author" content="Alexander Liu">
<meta property="article:tag" content="大三自学">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210805214421.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Java常问面试题总结与提高 - 兔の博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":1},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="兔の博客" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>兔的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/background_drinkingbeer.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="Java常问面试题总结与提高"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        Alexander Liu
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2021-08-05 21:38" pubdate>
          2021年8月5日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          25k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          213 分钟
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Java常问面试题总结与提高</h1>
            
              <p class="note note-info">
                
                  
                    本文最后更新于：1 年前
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h1 id="Java高频考点"><a href="#Java高频考点" class="headerlink" title="Java高频考点"></a>Java高频考点</h1><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210805214421.png" srcset="/img/loading.gif" lazyload alt="image-20210805214421596"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210805214638.png" srcset="/img/loading.gif" lazyload alt="image-20210805214638422"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210805214700.png" srcset="/img/loading.gif" lazyload alt="image-20210805214700114"></p>
<h1 id="1-局部变量表和计算栈"><a href="#1-局部变量表和计算栈" class="headerlink" title="1. 局部变量表和计算栈"></a>1. 局部变量表和计算栈</h1><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829092913.png" srcset="/img/loading.gif" lazyload alt="image-20210829092912831"></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/happy_bigqiang/article/details/90414541">非常有意思的一道题目嗷！！！</a></p>
<ul>
<li>知识点在于栈，局部变量表等东西的操作嗷，类似于Println和符号运算这样的操作。本质上，都是先把操作数放在栈里面，然后对于栈里面的数字进行操作的。</li>
<li>然后就是++这样的操作，在前在后，对于局部变量表操作和栈操作的顺序是不一样的嗷！！！</li>
</ul>
<h1 id="2-Singleton示例"><a href="#2-Singleton示例" class="headerlink" title="2. Singleton示例"></a>2. Singleton示例</h1><ul>
<li><p>单例，系统中只有一个实例对象可以被获取和使用的代码模式。例如JVM运行环境中的Runtime类</p>
</li>
<li><p>要点：</p>
<ul>
<li><p>某个类只能由一个实例</p>
<ul>
<li>构造器私有化</li>
</ul>
</li>
<li><p>必须自行创建这个实例</p>
<ul>
<li>静态变量来保证实例唯一</li>
</ul>
</li>
<li><p>必须向整个系统提供这个实例</p>
<ul>
<li>向整个系统提供这个实例：</li>
</ul>
<ol>
<li>直接暴露</li>
<li>静态变量的get方法获取</li>
</ol>
</li>
</ul>
</li>
<li><p>创建类型：</p>
<ol>
<li>饿汉式：</li>
</ol>
<ul>
<li>直接实例化饿汉式</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829163721.png" srcset="/img/loading.gif" lazyload alt="image-20210829163713857"></p>
<p>获取这个对象：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829164100.png" srcset="/img/loading.gif" lazyload alt="image-20210829164100868"></p>
<ol start="2">
<li>JDK1.5之后，枚举类型：</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829163830.png" srcset="/img/loading.gif" lazyload alt="image-20210829163830867"></p>
<p>获取这个对象：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210829164212.png" srcset="/img/loading.gif" lazyload alt="image-20210829164212855"></p>
<p>枚举类型会帮助我们重写String方法嗷！</p>
<ol start="3">
<li>静态代码块的方式：</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210901222143.png" srcset="/img/loading.gif" lazyload alt="image-20210901222143617"></p>
<p>类初始化的时候new处对象，保证对象只在初始化的时候创建一次嗷！！！</p>
<ol start="2">
<li>懒汉式：</li>
</ol>
</li>
</ul>
<h1 id="3-volatile"><a href="#3-volatile" class="headerlink" title="3. volatile:"></a>3. volatile:</h1><p>volatile是什么</p>
<ul>
<li>轻量级的同步机制</li>
<li>特性：<ul>
<li>保证可见性</li>
<li>不保证原子性</li>
<li>禁止指令重排</li>
</ul>
</li>
</ul>
<h2 id="JMM："><a href="#JMM：" class="headerlink" title="JMM："></a>JMM：</h2><ul>
<li>JVM（Java虚拟机）</li>
<li>JMM（Java内存模型）：<ul>
<li>并不真实存在，描述的是一组规则或规范</li>
</ul>
</li>
<li>几个概念：<ul>
<li>主内存：<ul>
<li><strong>共享</strong>内存区域，所有线程都可以访问嗷！</li>
</ul>
</li>
<li>工作内存：<ul>
<li>每个线程私有的工作内存空间</li>
</ul>
</li>
</ul>
</li>
<li>各自线程的工作内存会拷贝主内存中对应的数据，然后各自对于数据进行修改，修改完成之后，才会尝试将数据<strong>写回</strong>主物理内存。</li>
<li>只有在工作内存才能够对于变量进行修改嗷！！！不同的线程是不能够访问对方的工作内存嗷！！！工作内存的结果需要写回主内存之后，才能够真正的生效嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210808083346.png" srcset="/img/loading.gif" lazyload alt="image-20210808083346242"></p>
<h3 id="可见性定义："><a href="#可见性定义：" class="headerlink" title="可见性定义："></a>可见性定义：</h3><ul>
<li>一个线程对于数据进行了修改并且写回了主内存之后，其他的线程要马上能够知道嗷！！！只要有变动，大家都要立马知道嗷！！！</li>
<li>第一时间通知到所有线程的过程，这个就叫做可见性。</li>
</ul>
<h3 id="原子性："><a href="#原子性：" class="headerlink" title="原子性："></a>原子性：</h3><h2 id="Volatile特性："><a href="#Volatile特性：" class="headerlink" title="Volatile特性："></a>Volatile特性：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913190045.png" srcset="/img/loading.gif" lazyload alt="image-20210913190044888"></p>
<h3 id="可见性："><a href="#可见性：" class="headerlink" title="可见性："></a>可见性：</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyData</span>(){<br>    <span class="hljs-type">int</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addTo60</span><span class="hljs-params">()</span>{<br>    	<span class="hljs-built_in">this</span>.number = <span class="hljs-number">60</span>;<br>	}<br>}<br></code></pre></td></tr></tbody></table></figure>



<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{<br>    <span class="hljs-type">MyData</span> <span class="hljs-variable">myData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyData</span>();<br>    <br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {<br>        System.out.println(Thread.currentThread().getName()+<span class="hljs-string">"\t come in"</span>);<br>        <span class="hljs-keyword">try</span>{TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);}<span class="hljs-keyword">catch</span>{...}; <span class="hljs-comment">//模拟线程处理过程</span><br>        myData.addTo60();<br>    },<span class="hljs-string">"AAA"</span>).start();<br>}<br><br><span class="hljs-keyword">while</span>(myData.number == <span class="hljs-number">0</span>){<br>    <span class="hljs-comment">//main线程就一直在这里等待嗷！！！</span><br>}<br><br>System.out.println(<span class="hljs-string">"number变成了60啦！！！"</span>);<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>没有volatile就没有多线程的可见性嗷！！！</li>
<li>然后你发现不得行！！！主线程仍然是卡住的，因为没有任何线程来通知主线程，这个值发生了改变，主线程自己的工作空间中的值，是没有变化的嗷！！！（默认是没有可见性的嗷！！！）</li>
<li>如何实现可见性呢？Volatile！！！</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyData</span>(){<br>    <span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addTo60</span><span class="hljs-params">()</span>{<br>    	<span class="hljs-built_in">this</span>.number = <span class="hljs-number">60</span>;<br>	}<br>}<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>测试和上面的代码是一样的嗷！！！然后发现，volatile其实就是起到了及时通知main线程，某个变量发生了改变的作用。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210808083024.png" srcset="/img/loading.gif" lazyload alt="image-20210808083024568"></p>
<h3 id="不保证原子性："><a href="#不保证原子性：" class="headerlink" title="不保证原子性："></a>不保证原子性：</h3><ul>
<li>原子性是什么？<ul>
<li>不可分割，完整性，也即某个线程不能被分割，要整体完成，要么同时成功，要么同时失败。</li>
</ul>
</li>
<li>例子：</li>
</ul>
<p><code>valatile i</code></p>
<p><code>public methodPlus(){i++}</code></p>
<p>然后启动多个线程来同时操作（也就是常见的i++的例子）</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913192205.png" srcset="/img/loading.gif" lazyload alt="image-20210913192205069"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913192013.png" srcset="/img/loading.gif" lazyload alt="image-20210913192012747"></p>
<p>结果不是20000嗷！！！</p>
<ul>
<li>原理解释：<ul>
<li>可以在方法上加上sychronized吗？<ul>
<li>可以，可以保证20000</li>
<li>但是不好，效率消耗太大了嗷！！！</li>
</ul>
</li>
</ul>
</li>
<li>为啥会&lt;2000呀！！！</li>
</ul>
<p>多线程的调度出问题了嗷！！！</p>
<p>A和B同时读入了0，同时加1。A写入1，还没来得及通知别的线程，B就再次被调度写入了1，这就出问题了orz，就会导致这种情况的出现嗷！！！</p>
<ul>
<li>字节码：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913192921.png" srcset="/img/loading.gif" lazyload alt="image-20210913192921349"></p>
<ul>
<li><p>如何解决原子性：</p>
<ol>
<li>加入sync，太重了，不用这个</li>
<li><code>AutomicInteger automicInteger = new AutomicInteger();</code></li>
</ol>
<p>用法的话，建议去看看官方文档中怎么写的嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913193550.png" srcset="/img/loading.gif" lazyload alt="image-20210913193550094"></p>
<p>说白了底层为CAS，比起volatile来说，还是加了个轻量级锁orz。</p>
</li>
</ul>
<h3 id="禁止指令重排："><a href="#禁止指令重排：" class="headerlink" title="禁止指令重排："></a>禁止指令重排：</h3><ul>
<li>多线程：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914182640.png" srcset="/img/loading.gif" lazyload alt="image-20210914182640288"></p>
<ul>
<li>重排：</li>
</ul>
<p><img src="C:\Users\Alexander\AppData\Roaming\Typora\typora-user-images\image-20210913194820605.png" srcset="/img/loading.gif" lazyload alt="image-20210913194820605"></p>
<ul>
<li>处理器在进行重排序的时候必须要考虑指令之间的<strong>数据依赖性</strong></li>
<li>由于数据依赖性，指令重排也要考虑数据依赖性哈！！！volatile来决定嗷！！！</li>
<li>指令重排多线程下出现，这个重排是客观存在的，两个线程中使用的变量能够保证一致性嗷！！！避免指令重排优化，从而避免多线程环境下程序出现乱序执行的情况。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913200926.png" srcset="/img/loading.gif" lazyload alt="image-20210913200926447"></p>
<ul>
<li>指令屏障（保证禁止指令重排嗷！！！）：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913201109.png" srcset="/img/loading.gif" lazyload alt="image-20210913201108269"></p>
<p>禁止指令重排嗷！！！保证了安全性嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210913201109.png" srcset="/img/loading.gif" lazyload alt="指令重排"></p>
<ul>
<li>volatile的特点：<ul>
<li>可见性（强制刷出各种CPU的缓存数据嗷！！！）</li>
<li>禁止指令重排</li>
</ul>
</li>
</ul>
<h2 id="什么时候用Volatile："><a href="#什么时候用Volatile：" class="headerlink" title="什么时候用Volatile："></a>什么时候用Volatile：</h2><h3 id="单例模式："><a href="#单例模式：" class="headerlink" title="单例模式："></a>单例模式：</h3><ul>
<li>单例模式！！！本来是不用volatile的，但是当单线程 -&gt; 多线程的时候，就会出问题了嗷orz</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914183439.png" srcset="/img/loading.gif" lazyload alt="image-20210914183438141"></p>
<ul>
<li>解决方法：<ul>
<li>getInstance方法前面加上synchronized，没有问题嗷！！！可以正常执行嗷！！！</li>
<li>但是太重了orz</li>
</ul>
</li>
</ul>
<h3 id="DCL模式："><a href="#DCL模式：" class="headerlink" title="DCL模式："></a>DCL模式：</h3><ul>
<li>Double Check Lock，双端检锁机制。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914183722.png" srcset="/img/loading.gif" lazyload alt="image-20210914183722408"></p>
<p>对吗？不对！！！多线程，为了指令的效果，会指令重排！！！</p>
<ul>
<li>DCL不一定安全，指令重排！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914184250.png" srcset="/img/loading.gif" lazyload alt="image-20210914184249691"></p>
<p>这个时候就可能取到null嗷！！！</p>
<ul>
<li>指令重排只保证单线程情况下的指令一致性，多线程则不保证嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914184532.png" srcset="/img/loading.gif" lazyload alt="image-20210914184531643"></p>
<ul>
<li>禁止指令重排：<code>public static volatile SingletonDemo instance = null;</code></li>
</ul>
<h1 id="4-CAS："><a href="#4-CAS：" class="headerlink" title="4. CAS："></a>4. CAS：</h1><ul>
<li>Compare And Set，比较并且交换</li>
<li>Synchronized太重了，CAS就比synchronized轻量哦！！！</li>
<li>例如AutomicInteger , <code>compareAndSet(expect , update)</code></li>
</ul>
<h2 id="底层原理："><a href="#底层原理：" class="headerlink" title="底层原理："></a>底层原理：</h2><ul>
<li>why CAS not Synchronized？底层原理：<ul>
<li>自旋锁</li>
<li>Unsafe</li>
</ul>
</li>
<li>getAndIncrement底层实现：<ul>
<li>调用的JDK自带的unsafe类嗷！！！（都是底层的Native方法嗷！！！）</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914190803.png" srcset="/img/loading.gif" lazyload alt="image-20210914190803601"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914190825.png" srcset="/img/loading.gif" lazyload alt="image-20210914190825087"></p>
<ul>
<li>Unsafe类：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914191644.png" srcset="/img/loading.gif" lazyload alt="image-20210914191643821"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914191909.png" srcset="/img/loading.gif" lazyload alt="image-20210914191909041"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914192042.png" srcset="/img/loading.gif" lazyload alt="image-20210914192041067"></p>
<ul>
<li>getAndAddInt</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914192335.png" srcset="/img/loading.gif" lazyload alt="image-20210914192335325"></p>
<p>关键是底层的CAS的靠的是CPU的原子操作来实现的嗷！！！因此这样能够保证原子性嗷！！！读取，比较和设置一气呵成。不存在中间有线程特判比较的这种情况出现嗷！！！</p>
<ul>
<li>getAndIncrement：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914215818.png" srcset="/img/loading.gif" lazyload alt="image-20210914215818159"></p>
<ul>
<li>原理：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914220153.png" srcset="/img/loading.gif" lazyload alt="image-20210914220153739"></p>
<p><strong>Unsafe类+CAS思想（自旋）</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914220305.png" srcset="/img/loading.gif" lazyload alt="image-20210914220305279"></p>
<h2 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h2><ol>
<li>循环时间长，CPU开销大</li>
<li>只能保证一个变量的原子性操作，如果要一段代码，那就要synchronized嗷！！！</li>
<li>引出了ABA问题。</li>
</ol>
<h1 id="5-AtomicInteger的ABA问题："><a href="#5-AtomicInteger的ABA问题：" class="headerlink" title="5. AtomicInteger的ABA问题："></a>5. AtomicInteger的ABA问题：</h1><ul>
<li>原子引用更新 —&gt;&gt;&gt; 如何规避ABA问题</li>
<li>狸猫换太子：<ul>
<li>就是快速反复横跳，把值该到了，欸嘿，我又改回来了，吐了，慢的根本不知道嗷orz。</li>
</ul>
</li>
</ul>
<h2 id="AutomicReference："><a href="#AutomicReference：" class="headerlink" title="AutomicReference："></a>AutomicReference：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210914221952.png" srcset="/img/loading.gif" lazyload alt="image-20210914221952711"></p>
<p>对于我们需要的类进行原子包装嗷！！！</p>
<h2 id="时间戳的原子引用："><a href="#时间戳的原子引用：" class="headerlink" title="时间戳的原子引用："></a>时间戳的原子引用：</h2><ul>
<li>规避ABA问题：时间戳的原子引用</li>
</ul>
<h3 id="AtomicStampedReference"><a href="#AtomicStampedReference" class="headerlink" title="AtomicStampedReference"></a>AtomicStampedReference</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915200923.png" srcset="/img/loading.gif" lazyload alt="image-20210915200908489"></p>
<p><code>atomicStampedReference.compareAndSet(expectedReference , newReference , expectedStamp , newStamp)</code></p>
<p>常用用法：</p>
<p><code>boolean result = atomicStampedReference.compareAndSet(100 , 101 , automicStampedReference.getStamp() , automicStampedReference.getStamp()+1);</code></p>
<p><code>int stamp = atomicStampedReference.getStamp();</code></p>
<p><code>int result = atomicStampedReference.getReference();</code></p>
<p>相当于现在比较两个值了而已嘛，本质没啥区别</p>
<h1 id="6-ArrayList线程不安全："><a href="#6-ArrayList线程不安全：" class="headerlink" title="6. ArrayList线程不安全："></a>6. ArrayList线程不安全：</h1><ul>
<li>这里的名字不准确，应该是Collection类普遍不安全嗷！！！</li>
</ul>
<h2 id="写时复制："><a href="#写时复制：" class="headerlink" title="写时复制："></a>写时复制：</h2><ul>
<li>扩容：默认的capacity是10，超过10了要扩容</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915203909.png" srcset="/img/loading.gif" lazyload alt="image-20210915203909547"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915204001.png" srcset="/img/loading.gif" lazyload alt="image-20210915204001207"></p>
<ul>
<li>线程不安全！！！</li>
</ul>
<p>ArrayList的add方法为了保证并发性和效率，没有加锁嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915204430.png" srcset="/img/loading.gif" lazyload alt="image-20210915204429858"></p>
<ol>
<li>故障现象：</li>
</ol>
<p>java.util.ConcurrentModificationException</p>
<ol start="2">
<li>导致原因：</li>
</ol>
<p>并发争抢修改导致，两个进程抢着写的时候，造成了数据不一致的情况嗷！！！</p>
<p>CopyOnWrite , OnWrite的时候才Copy</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915210514.png" srcset="/img/loading.gif" lazyload alt="image-20210915210514393"></p>
<ol start="3">
<li>解决方案：</li>
</ol>
<ul>
<li>加锁！！！可以吗？不可以，JDK源码你加个锤子的锁？？？</li>
<li>3.1：用Vector类！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915204815.png" srcset="/img/loading.gif" lazyload alt="image-20210915204814766"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915204846.png" srcset="/img/loading.gif" lazyload alt="image-20210915204845542"></p>
<p>好使！！！但是太重了orz，而且Vector用的少orz，并发性低嗷orz。牺牲了安全性，提高了性能嗷！！！</p>
<ul>
<li><p>3.2：Collection接口和Collections类！！！注意嗷，后面那个是类！！！Collections就是帮助我们来解决这个问题的嗷！！！<img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915205140.png" srcset="/img/loading.gif" lazyload alt="image-20210915205139824"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915205210.png" srcset="/img/loading.gif" lazyload alt="image-20210915205210076"></p>
</li>
</ul>
<p>你设想一下，这里竟然有这么多Map , List , Set之类的，说明这些东西都是线程不安全的嗷！！！</p>
<ul>
<li>3.3：CopyOnWriteArrayList</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915210029.png" srcset="/img/loading.gif" lazyload alt="image-20210915210029661"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915210105.png" srcset="/img/loading.gif" lazyload alt="image-20210915210105142"></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">add</span><span class="hljs-params">(E e)</span> {<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">ReentrantLock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.lock;<br>    lock.lock();<br>    <span class="hljs-keyword">try</span> {<br>        Object[] elements = getArray();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> elements.length;<br>        Object[] newElements = Arrays.copyOf(elements, len + <span class="hljs-number">1</span>);<br>        newElements[len] = e;<br>        setArray(newElements);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    } <span class="hljs-keyword">finally</span> {<br>        lock.unlock();<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>
<ul>
<li>老版本的copy出来，然后把自己的信息写进去，再让系统中的引用编程现在这个数组嗷！！！</li>
</ul>
<ol start="4">
<li>优化建议：</li>
</ol>
<h2 id="HashSet线程不安全："><a href="#HashSet线程不安全：" class="headerlink" title="HashSet线程不安全："></a>HashSet线程不安全：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915210928.png" srcset="/img/loading.gif" lazyload alt="image-20210915210926940"></p>
<p>也是一样的问题嗷！！！</p>
<ul>
<li>解决方法：<ol>
<li><code>Collections.synchronizedSet(new HashSet&lt;&gt;());</code></li>
<li>JUC中的<code>CopyOnWriteSet&lt;&gt;()</code></li>
</ol>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915211451.png" srcset="/img/loading.gif" lazyload alt="image-20210915211450931"></p>
<ul>
<li>HashSet底层数据结构就是HashMap&lt;&gt;()</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915211620.png" srcset="/img/loading.gif" lazyload alt="image-20210915211620437"></p>
<ul>
<li>HashSet底层如果是HashMap，那为啥add方法只有一个参数捏？？？</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915211826.png" srcset="/img/loading.gif" lazyload alt="image-20210915211825796"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915211803.png" srcset="/img/loading.gif" lazyload alt="image-20210915211802866"></p>
<p>value是个恒定的值哦！！！</p>
<h2 id="HashMap线程不安全："><a href="#HashMap线程不安全：" class="headerlink" title="HashMap线程不安全："></a>HashMap线程不安全：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915212240.png" srcset="/img/loading.gif" lazyload alt="image-20210915212239707"></p>
<ul>
<li>解决方法：<ol>
<li><code>ConcurrentHashMap</code></li>
<li><code>Collections.synchronizedMap</code></li>
</ol>
</li>
</ul>
<h1 id="7-TransferValue醒脑："><a href="#7-TransferValue醒脑：" class="headerlink" title="7. TransferValue醒脑："></a>7. TransferValue醒脑：</h1><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915215803.png" srcset="/img/loading.gif" lazyload alt="image-20210915215802972"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915215840.png" srcset="/img/loading.gif" lazyload alt="image-20210915215840582"></p>
<p>String比较特殊嗷！！！它是final，赋予了地址之后，这个地址是不会变动的。String str = “abc”，String指向了常量池中的地址。而str = “XXX”，确实找到了常量池中的”XXX”，如下右图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915220409.png" srcset="/img/loading.gif" lazyload alt="image-20210915220409692"></p>
<p>说白了就是传进去就是一个地址，方法中参数的str本质上也是一个拷贝，一个指向这个地址的指针的拷贝，这里的赋值，无非是把拷贝指针的指向变了，改变不了原指针的指向嗷！！！</p>
<h1 id="8-Java中的锁们："><a href="#8-Java中的锁们：" class="headerlink" title="8. Java中的锁们："></a>8. Java中的锁们：</h1><h2 id="公平锁和非公平锁："><a href="#公平锁和非公平锁：" class="headerlink" title="公平锁和非公平锁："></a>公平锁和非公平锁：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915220950.png" srcset="/img/loading.gif" lazyload alt="image-20210915220949873"></p>
<p>这里不传参数等于传入了false参数嗷！！！天生这个即使非公平锁嗷！！！公平锁就是先来后到，非公平就是允许某些线程能够“不公平竞争”，能够加塞！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915221301.png" srcset="/img/loading.gif" lazyload alt="image-20210915221300727"></p>
<h3 id="ReentrantLock："><a href="#ReentrantLock：" class="headerlink" title="ReentrantLock："></a>ReentrantLock：</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210915221459.png" srcset="/img/loading.gif" lazyload alt="image-20210915221458845"></p>
<p>默认为非公平锁，非公平锁的有点在于吞吐量比公平锁大嗷！！！说白了又是体现了优先级呗！！！优先级高的能被响应，吞吐量就会大嗷！！！</p>
<ul>
<li>Synchronized而言，也是一种非公平锁哦！！！</li>
</ul>
<h2 id="可重入锁（递归锁）："><a href="#可重入锁（递归锁）：" class="headerlink" title="可重入锁（递归锁）："></a>可重入锁（递归锁）：</h2><ul>
<li>ReentrantLock就是可重入锁哦！！！</li>
<li>可重入锁就是递归锁</li>
<li>指的是统一线程外层函数获得锁之后，内层递归函数仍然能获取该锁的代码！在同一个线程在外层方法能够获取锁的时候，在进入内层方法会自动获取锁嗷！！！（也就是说：线程可以进入任何一个<strong>它已经拥有的锁所同步着的代码块</strong>！！！）</li>
<li><strong>线程可以进入任何一个它已经拥有的锁所同步的代码块。</strong></li>
<li>ReentrantLock/Synchronized就是典型的非公平可重入锁嗷！！！</li>
<li><strong>最大作用：避免死锁</strong></li>
<li>代码：</li>
</ul>
<h4 id="Case1："><a href="#Case1：" class="headerlink" title="Case1："></a>Case1：</h4><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210916201751.png" srcset="/img/loading.gif" lazyload alt="image-20210916201750895"></p>
<p>这个就是例子：sendSMS()调用了sendEmail，进入sendSMS中执行sendEmail的时候会自动获取锁并进入这个代码块执行嗷！！！</p>
<h4 id="Case2："><a href="#Case2：" class="headerlink" title="Case2："></a>Case2：</h4><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210916202040.png" srcset="/img/loading.gif" lazyload alt="image-20210916202040755"></p>
<ul>
<li>运行结果：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210916202204.png" srcset="/img/loading.gif" lazyload alt="image-20210916202204510"></p>
<ul>
<li>思考：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210916202314.png" srcset="/img/loading.gif" lazyload alt="image-20210916202314495"></p>
<p>只要锁配对正确，加几把锁都没问题嗷！！！可以正确运行嗷！！！！</p>
<h2 id="自旋锁："><a href="#自旋锁：" class="headerlink" title="自旋锁："></a>自旋锁：</h2><ul>
<li>spinlock：尝试获取锁的线程不会立即阻塞，而是采用循环的方式尝试去获取锁。好处是减少了上下文切换的消耗，缺点是循环会消耗CPU嗷！！！</li>
</ul>
<h3 id="手写自旋锁："><a href="#手写自旋锁：" class="headerlink" title="手写自旋锁："></a>手写自旋锁：</h3><ul>
<li>本质：while + compareAndSet()方法</li>
</ul>
<p>本质上利用一个拥有compareAndSet()方法的变量来帮助我们实现就行嗷！！！</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java">AtomicReference&lt;Thread&gt; atomicReference = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AutomicReference</span>&lt;&gt;();<br><br><span class="hljs-comment">//加锁</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myLock</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> Thread.currentThread();<br>    System.out.println(thread.currentThread().getName + <span class="hljs-string">"\t come in O(n_n)"</span>);<br>    <br>    <span class="hljs-keyword">while</span>(!atomicReference.compareAndSet(<span class="hljs-literal">null</span> , thread)){<br>        <br>    }<br>    <span class="hljs-comment">//如果成功进入，根本就不进入while循环，直接执行下面的业务代码</span><br>}<br><br><span class="hljs-comment">//解锁</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myUnLock</span><span class="hljs-params">()</span>{<br>    <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> Thread.currentThread();<br>    System.out.println(thread.currentThread().getName + <span class="hljs-string">"\t come out O(n_n)~~"</span>);<br>    automicReference.compareAndSet(thread , <span class="hljs-literal">null</span>);<br>}<br><span class="hljs-comment">//上面这些统一放到一个类中就可以了嗷(叫做SpinLockDemo)！！！</span><br></code></pre></td></tr></tbody></table></figure>

<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span>{<br>    <span class="hljs-type">SpinLockDemo</span> <span class="hljs-variable">spinLockDemo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpinLockDemo</span>();<br>    <br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;{<br>        spinLockDemo.myLock();<br>        <span class="hljs-comment">//执行业务逻辑，例如sleep等待</span><br>        spinLockDemo.myUnLock();<br>    },<span class="hljs-string">"AA"</span>).start();<br>    <br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;{<br>        spinLockDemo.myLock();<br>        <span class="hljs-comment">//执行业务逻辑，例如sleep等待</span><br>        spinLockDemo.myUnLock();<br>    },<span class="hljs-string">"BB"</span>).start();<br>}<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>这里非常有技巧性，这里的AtomicReference的泛型就可以拥有compareAndSet方法，但是为了让每个线程都可以“独立的拥有一些特征来获得自旋锁”，我们采用了线程作为泛型对象进行操作嗷！！！</li>
<li><code>thread.currentThread()</code>就能够获得当前的线程，不同线程的这个值肯定不一样嗷！！！这样就比较好一些嗷！！！</li>
</ul>
<h2 id="独占锁（写锁）-x2F-共享锁（读锁）-x2F-互斥锁"><a href="#独占锁（写锁）-x2F-共享锁（读锁）-x2F-互斥锁" class="headerlink" title="独占锁（写锁）/ 共享锁（读锁）/ 互斥锁"></a>独占锁（写锁）/ 共享锁（读锁）/ 互斥锁</h2><h3 id="独占锁（写锁）"><a href="#独占锁（写锁）" class="headerlink" title="独占锁（写锁）"></a>独占锁（写锁）</h3><ul>
<li><p>指该锁一次只能被一个线程所持有。</p>
</li>
<li><p>对于ReentrantLock和Synchronized而言都是独占锁。</p>
</li>
<li><p>发展历程：<code>sync ---&gt; lock ---&gt; ReentrantReadWriteLock</code></p>
</li>
<li><p>读写锁提高了并发效率嗷！！！从保证原子性到提高效率嗷！！！</p>
</li>
<li><p>规则：</p>
<ul>
<li>读-读可以共存</li>
<li>读-写不能共存</li>
<li>写-写不能共存</li>
</ul>
</li>
<li><p>实例代码：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917110338.png" srcset="/img/loading.gif" lazyload alt="image-20210917110337741"></p>
<p>写操作：必须原子 + 独占（写锁）</p>
<p>这里模拟的时候，底层都是要用volatile的，保证可见性非常重要！！！缓存的可见性和及时性非常重要！！！</p>
<ul>
<li>ReentrantReadWriteLock读写同体，对于不同的方法要调用不同的方法适配嗷！！！</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-type">ReentrantReadWriteLock</span> <span class="hljs-variable">rwlock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantReadWriteLock</span>();<br><span class="hljs-keyword">try</span> {<br>    <span class="hljs-comment">//这里也很简单，直接根据不同情况获取不同的锁就成</span><br>    rwlock.readLock().lock();<br>} <span class="hljs-keyword">catch</span> (Exception e) {<br>    e.printStackTrace();<br>}<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>加写锁例子：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917112125.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li>加读锁例子：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917112154.png" srcset="/img/loading.gif" lazyload alt="image-20210917112154108"></p>
<ul>
<li>以上两者对比：</li>
</ul>
<h3 id="共享锁（读锁）："><a href="#共享锁（读锁）：" class="headerlink" title="共享锁（读锁）："></a>共享锁（读锁）：</h3><ul>
<li>该锁可以被多个线程所持有</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917112350.png" srcset="/img/loading.gif" lazyload alt="image-20210917112350047"></p>
<h1 id="9-CountDownLatch-x2F-CyclicBarrier-x2F-Semaphore"><a href="#9-CountDownLatch-x2F-CyclicBarrier-x2F-Semaphore" class="headerlink" title="9. CountDownLatch / CyclicBarrier / Semaphore"></a>9. CountDownLatch / CyclicBarrier / Semaphore</h1><h2 id="CountDownLatch："><a href="#CountDownLatch：" class="headerlink" title="CountDownLatch："></a>CountDownLatch：</h2><ul>
<li><p>有点像Linux中那个等待子线程结束（waitpid / pthread_join），主线程才能够最后退出的函数方法。</p>
</li>
<li><p>Demo：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917113302.png" srcset="/img/loading.gif" lazyload alt="image-20210917113301833"></p>
<ul>
<li>可谓是非常像了，这个玩意儿就是卡在这里，等所有线程的东西执行完了，才会继续往下执行嗷！！！</li>
</ul>
<h3 id="枚举："><a href="#枚举：" class="headerlink" title="枚举："></a>枚举：</h3><ul>
<li>可以当作小数据库来用嗷？？？还有这种操作？？？</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917114858.png" srcset="/img/loading.gif" lazyload alt="image-20210917114857319"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917115028.png" srcset="/img/loading.gif" lazyload alt="image-20210917115028480"></p>
<ul>
<li>原来的代码的修改：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917115117.png" srcset="/img/loading.gif" lazyload alt="image-20210917115116832"></p>
<p>程序耦合度急剧降低，只要修改枚举中的元素，处处生效嗷！！！</p>
<ul>
<li>枚举中元素的读取：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917115228.png" srcset="/img/loading.gif" lazyload alt="image-20210917115227796"></p>
<p>第一个相当于行的名字，第二三行相当于读取这一行某个元素的值嗷！！！</p>
<ul>
<li>非常实用嗷！！！</li>
</ul>
<h2 id="CyclicBarrier："><a href="#CyclicBarrier：" class="headerlink" title="CyclicBarrier："></a>CyclicBarrier：</h2><ul>
<li>增加到多少就能够发生某件事，和上面相反，这个是做甲方。</li>
<li>等人齐了，才能够开会~。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917144338.png" srcset="/img/loading.gif" lazyload alt="image-20210917144338011"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917144706.png" srcset="/img/loading.gif" lazyload alt="image-20210917144706100"></p>
<h2 id="Semaphore："><a href="#Semaphore：" class="headerlink" title="Semaphore："></a>Semaphore：</h2><ul>
<li>多个资源抢多份资源怎么控制哇？</li>
<li>这个就是信号量，一个是用于多个共享资源的互斥实用，另外一个适用于并发线程控制嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917145654.png" srcset="/img/loading.gif" lazyload alt="image-20210917145653800"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917145712.png" srcset="/img/loading.gif" lazyload alt="image-20210917145712432"></p>
<ul>
<li>这个和操作系统中的没啥区别，都是信号量嗷！！！一个信号量可以当作锁来用嗷！！！</li>
</ul>
<h1 id="10-阻塞队列"><a href="#10-阻塞队列" class="headerlink" title="10. 阻塞队列"></a>10. 阻塞队列</h1><h2 id="阻塞队列："><a href="#阻塞队列：" class="headerlink" title="阻塞队列："></a>阻塞队列：</h2><ul>
<li>阻塞队列有好的一面。</li>
<li>不得不阻塞，如何管理？</li>
</ul>
<h3 id="队列-阻塞队列以及其api："><a href="#队列-阻塞队列以及其api：" class="headerlink" title="队列+阻塞队列以及其api："></a>队列+阻塞队列以及其api：</h3><ul>
<li>就是生产者和消费者问题的Java版本而已</li>
<li>空的队列拿元素，阻塞。满的队列添加元素，阻塞。</li>
<li>why BlockingQueue？不需要关心什么时候阻塞和唤醒线程，BlockingQueue给我们一手包办了嗷！！！这个效率非常高嗷！！！（手动挡变成了自动挡嗷！！！）</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917192349.png" srcset="/img/loading.gif" lazyload alt="image-20210917192349179"></p>
<ul>
<li>有好多实现类嗷！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917192442.png" srcset="/img/loading.gif" lazyload alt="image-20210917192442233"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917192507.png" srcset="/img/loading.gif" lazyload alt="image-20210917192506647"></p>
<p>红色的是重点，这三个就是线程池的底层嗷！！！</p>
<p>最后一个是Deque嗷！！！双端队列，和上面的Queue是有区别的嗷！！！</p>
<p>SynchronousQueue专属定制版，就一个嗷！！！</p>
<ul>
<li>常用情况（抛出异常）：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917192913.png" srcset="/img/loading.gif" lazyload alt="image-20210917192913651"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917213941.png" srcset="/img/loading.gif" lazyload alt="image-20210917213941158"></p>
<p>像这个Queue，符合先进先出的概念，element就是检查第一个元素嗷！！！add和remove还有element就是有这样的一个特点：如果对应的操作失败，就会抛出异常嗷！！！</p>
<ul>
<li>常用情况（特殊值）：</li>
</ul>
<p>操作成功返回true，操作失败返回false嗷！！！</p>
<p>取出来的时候，取得到就是对应的元素，取不到就是NULL</p>
<ul>
<li>常用情况（阻塞）：</li>
</ul>
<p>如果操作失败的话，默认会进行阻塞，等待嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917214504.png" srcset="/img/loading.gif" lazyload alt="image-20210917214504234"></p>
<ul>
<li>常用情况（超时）：</li>
</ul>
<p>不要那么猛，折中的一种做法嗷！！！我可以等，但是过时不候，如果超时了我线程就自己退出了嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917214652.png" srcset="/img/loading.gif" lazyload alt="image-20210917214652384"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210917214711.png" srcset="/img/loading.gif" lazyload alt="image-20210917214711162"></p>
<h2 id="SynchronousQueue："><a href="#SynchronousQueue：" class="headerlink" title="SynchronousQueue："></a>SynchronousQueue：</h2><ul>
<li>本质上是一个不存储元素的BlockingQueue，每一个put都要等待一个take嗷！！！</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs java">SynchronousQueue&lt;String&gt; blockingQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SynchronousQueue</span>&lt;&gt;();<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;{<br><br>    <span class="hljs-keyword">try</span> {<br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"\t put 1"</span>);<br>        blockingQueue.put(<span class="hljs-string">"1"</span>);<br>        <br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"\t put 2"</span>);<br>        blockingQueue.put(<span class="hljs-string">"2"</span>);<br>        <br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"\t put 3"</span>);<br>        blockingQueue.put(<span class="hljs-string">"3"</span>);<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        e.printStackTrace();<br>    }<br><br><br>},<span class="hljs-string">"Producer1"</span>).start();<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;{<br><br>    <span class="hljs-keyword">try</span> {<br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"\t put 4"</span>);<br>        blockingQueue.put(<span class="hljs-string">"4"</span>);<br><br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"\t put 5"</span>);<br>        blockingQueue.put(<span class="hljs-string">"5"</span>);<br>        <br>        System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"\t put 6"</span>);<br>        blockingQueue.put(<span class="hljs-string">"6"</span>);<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        e.printStackTrace();<br>    }<br>},<span class="hljs-string">"Producer2"</span>).start();<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {<br>    <span class="hljs-keyword">try</span> {<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);<br>        System.out.println(blockingQueue.take());<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        e.printStackTrace();<br>    }<br><br>    <span class="hljs-keyword">try</span> {<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);<br>        System.out.println(blockingQueue.take());<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        e.printStackTrace();<br>    }<br><br>    <span class="hljs-keyword">try</span> {<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);<br>        System.out.println(blockingQueue.take());<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        e.printStackTrace();<br>    }<br><br>    <span class="hljs-keyword">try</span> {<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);<br>        System.out.println(blockingQueue.take());<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        e.printStackTrace();<br>    }<br><br>    <span class="hljs-keyword">try</span> {<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);<br>        System.out.println(blockingQueue.take());<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        e.printStackTrace();<br>    }<br><br>    <span class="hljs-keyword">try</span> {<br>        TimeUnit.SECONDS.sleep(<span class="hljs-number">3</span>);<br>        System.out.println(blockingQueue.take());<br>    } <span class="hljs-keyword">catch</span> (InterruptedException e) {<br>        e.printStackTrace();<br>    }<br>},<span class="hljs-string">"Consumer1"</span>).start();<br></code></pre></td></tr></tbody></table></figure>



<h2 id="用在哪里？"><a href="#用在哪里？" class="headerlink" title="用在哪里？"></a>用在哪里？</h2><h3 id="生产者消费者模式（老版）"><a href="#生产者消费者模式（老版）" class="headerlink" title="生产者消费者模式（老版）"></a>生产者消费者模式（老版）</h3><ul>
<li><p><code>ProdConsumer_TraditionDemo</code></p>
</li>
<li><p><code>ProdConsumer_BlockQueueDemo</code></p>
</li>
<li><p>传统版：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918202929.png" srcset="/img/loading.gif" lazyload alt="image-20210918202929146"></p>
<p>老版sync向新版lock的转换：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918203703.png" srcset="/img/loading.gif" lazyload alt="image-20210918203703145"></p>
<ul>
<li>代码：</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProdConsumer_TraditionDemo</span> {<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {<br>        <span class="hljs-type">ShareData</span> <span class="hljs-variable">shareData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShareData</span>();<br><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;{<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {<br>                <span class="hljs-keyword">try</span> {<br>                    shareData.increment();<br>                } <span class="hljs-keyword">catch</span> (Exception e) {<br>                    e.printStackTrace();<br>                }<br>            }<br>        },<span class="hljs-string">"Thread A"</span>).start();<br><br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;{<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {<br>                <span class="hljs-keyword">try</span> {<br>                    shareData.decrement();<br>                } <span class="hljs-keyword">catch</span> (Exception e) {<br>                    e.printStackTrace();<br>                }<br>            }<br>        },<span class="hljs-string">"Thread B"</span>).start();<br>    }<br>}<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShareData</span> <span class="hljs-comment">// 资源类</span><br>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Lock</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">condition</span> <span class="hljs-operator">=</span> lock.newCondition();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">increment</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception<br>    {<br>        <span class="hljs-comment">//1. 判断</span><br>        lock.lock();<br>        <span class="hljs-keyword">try</span>{<br>            <span class="hljs-comment">//判断</span><br>            <span class="hljs-keyword">while</span> (number != <span class="hljs-number">0</span>){<br>                <span class="hljs-comment">//等待，不能生产</span><br>                condition.await();;<br>            }<br><br>            <span class="hljs-comment">//干活</span><br>            number ++ ;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"\t"</span> + number);<br>            <span class="hljs-comment">//通知唤醒</span><br>            condition.signalAll();<br>        }<span class="hljs-keyword">catch</span> (Exception e){<br>            e.printStackTrace();<br>        }<span class="hljs-keyword">finally</span> {<br>            lock.unlock();<br>        }<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">decrement</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception<br>    {<br>        <span class="hljs-comment">//1. 判断</span><br>        lock.lock();<br>        <span class="hljs-keyword">try</span>{<br>            <span class="hljs-comment">//判断</span><br>            <span class="hljs-keyword">while</span> (number == <span class="hljs-number">0</span>){<br>                <span class="hljs-comment">//等待，不能生产</span><br>                condition.await();;<br>            }<br><br>            <span class="hljs-comment">//干活</span><br>            number -- ;<br>            System.out.println(Thread.currentThread().getName() + <span class="hljs-string">"\t"</span> + number);<br>            <span class="hljs-comment">//通知唤醒</span><br>            condition.signalAll();<br>        }<span class="hljs-keyword">catch</span> (Exception e){<br>            e.printStackTrace();<br>        }<span class="hljs-keyword">finally</span> {<br>            lock.unlock();<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li><strong>多线程判断都要用while</strong>，不要用if，if就有可能出现问题嗷！！！</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">Thread A	1<br>Thread B	0<br>Thread A	1<br>Thread B	0<br>Thread A	1<br>Thread B	0<br>Thread A	1<br>Thread B	0<br>Thread A	1<br>Thread B	0<br></code></pre></td></tr></tbody></table></figure>



<h3 id="synchronized和lock的区别"><a href="#synchronized和lock的区别" class="headerlink" title="synchronized和lock的区别"></a>synchronized和lock的区别</h3><ol>
<li>原始构成</li>
</ol>
<ul>
<li>synchronized是Java关键字，lock是java5以后出现的一个类。</li>
<li>synchronized是属于JVM层面的，monitorenter和monitorexit，底层是通过monitor对象来完成的，其实wait / notify等方法也是依赖于monitor对象，只有在同步块或同步方法中才能调用wait / notify等方法。</li>
<li>Lock是具体类，JUC中，是api层面的锁嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918210748.png" srcset="/img/loading.gif" lazyload alt="image-20210918210748451"></p>
<ol start="2">
<li>使用方法</li>
</ol>
<ul>
<li>synchronized不需要用户去手动释放锁，当synchronized代码执行完成后系统会自动让线程释放对于锁的占用嗷！！！</li>
<li>ReentrantLock需要用户手动释放锁，如果用户没有主动释放锁，那么就有可能会出现死锁现象嗷！！！需要lock ， unlock方法配合try / finally语句块来完成嗷！！！</li>
</ul>
<ol start="3">
<li>判断是否可以中断</li>
</ol>
<ul>
<li>等待是否可以中断，synchronized不可中断，除非抛出异常或者正常运行完成。ReentrantLock可中断：<ol>
<li>设置超时方法 trylock（long timeout , TimeUnit unit）</li>
<li>LockInterruptibly()放代码块中，调用interrupt方法可以中断</li>
</ol>
</li>
</ul>
<ol start="4">
<li>加锁是否公平</li>
</ol>
<ul>
<li>synchronized非公平锁</li>
<li>ReentrantLock两者都可以，默认非公平锁，构造方法可以传入boolean值，true为公平锁，false为非公平锁。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918212212.png" srcset="/img/loading.gif" lazyload alt="image-20210918212212308"></p>
<ol start="5">
<li>锁绑定多个条件的Condition</li>
</ol>
<p>ReentrantLock可以实现分组唤醒需要唤醒的线程们，可以<strong>精确唤醒</strong>，而不是像synchronized要么随机唤醒一个要么唤醒全部线程嗷！！！</p>
<ul>
<li>例如A唤醒B，B唤醒C：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210918213531.png" srcset="/img/loading.gif" lazyload alt="image-20210918213531894"></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShareResource</span>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">number</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; <span class="hljs-comment">//A:1 , B:2 , C:3</span><br>    <span class="hljs-type">private</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReentrantLock</span>();<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> lock.newCondition();<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">c2</span> <span class="hljs-operator">=</span> lock.newCondition();<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Condition</span> <span class="hljs-variable">c3</span> <span class="hljs-operator">=</span> lock.newCondition();<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print5</span><span class="hljs-params">()</span>{<br>        lock.lock();<br>        <span class="hljs-keyword">try</span>{<br>            <span class="hljs-comment">//1. 判断</span><br>            <span class="hljs-keyword">while</span>(number != <span class="hljs-number">1</span>)<br>            {<br>                c1.await();<br>            }<br>            <br>            <span class="hljs-comment">//2. 干活</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> ; i &lt;= <span class="hljs-number">5</span> ; i++)<br>            {<br>                sout(Thread.currentThread().getName()+<span class="hljs-string">"\t"</span>+i);<br>            }<span class="hljs-keyword">finally</span> {<br>            	lock.unlock();<br>        	}<br>            <br>            <span class="hljs-comment">//3. 通知</span><br>            number = <span class="hljs-number">2</span>;<br>            c2.signal();<br>        }<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print10</span><span class="hljs-params">()</span>{<br>        lock.lock();<br>        <span class="hljs-keyword">try</span>{<br>            <span class="hljs-comment">//1. 判断</span><br>            <span class="hljs-keyword">while</span>(number != <span class="hljs-number">2</span>)<br>            {<br>                c2.await();<br>            }<br>            <br>            <span class="hljs-comment">//2. 干活</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> ; i &lt;= <span class="hljs-number">10</span> ; i++)<br>            {<br>                sout(Thread.currentThread().getName()+<span class="hljs-string">"\t"</span>+i);<br>            }<br>            <br>            <span class="hljs-comment">//3. 通知</span><br>            number = <span class="hljs-number">3</span>;<br>            c3.signal();<br>        }<span class="hljs-keyword">finally</span>{<br>            lock.unlock();<br>        }<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print15</span><span class="hljs-params">()</span>{<br>        lock.lock();<br>        <span class="hljs-keyword">try</span>{<br>            <span class="hljs-comment">//1. 判断</span><br>            <span class="hljs-keyword">while</span>(number != <span class="hljs-number">3</span>)<br>            {<br>                c3.await();<br>            }<br>            <br>            <span class="hljs-comment">//2. 干活</span><br>            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> ; i &lt;= <span class="hljs-number">15</span> ; i++)<br>            {<br>                sout(Thread.currentThread().getName()+<span class="hljs-string">"\t"</span>+i);<br>            }<span class="hljs-keyword">finally</span> {<br>            	lock.unlock();<br>        	}<br>            <br>            <span class="hljs-comment">//3. 通知</span><br>            number = <span class="hljs-number">1</span>;<br>            c1.signal();<br>        }<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>



<h3 id="生产者消费者模式（阻塞队列）"><a href="#生产者消费者模式（阻塞队列）" class="headerlink" title="生产者消费者模式（阻塞队列）"></a>生产者消费者模式（阻塞队列）</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyResource</span>{<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">FLAG</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<span class="hljs-comment">//默认开启，进行生产+消费</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">AutomicInteger</span> <span class="hljs-variable">automicInteger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AutomicInteger</span>();<br>    <br>    BlockingQuere&lt;String&gt; blockingQueue = <span class="hljs-literal">null</span>;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyResource</span><span class="hljs-params">(BlockingQueue&lt;String&gt; blockingQueue)</span>{<br>        <span class="hljs-built_in">this</span>.blockingQueue = blockingQueue;<br>        sout(blockingQueue.getClass().getName());<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myProducer</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception<br>    {<br>        <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">boolean</span> retValue;<br>        <span class="hljs-keyword">while</span>(FLAG)<br>        {<br>            data = automicInteger.incrementAndGet()+<span class="hljs-string">""</span>;<br>            retValue = blockingQueue.offer(data,<span class="hljs-number">2L</span>,TimeUnit.SECONDS);<br>            <span class="hljs-keyword">if</span>(retValue){<br>                sout(Thread.currentThread().getName()+<span class="hljs-string">"\t 插入队列"</span> + data + <span class="hljs-string">"成功"</span>);<br>            }<span class="hljs-keyword">else</span>{<br>                sout(Thread.currentThread().getName()+<span class="hljs-string">"\t 插入队列"</span> + data + <span class="hljs-string">"失败"</span>);<br>            }<br>            TimeUnit.SECONDS.sleep(<span class="hljs-number">1</span>);<br>        }<br>        <br>        sout(Thread.currentThread().getName()+<span class="hljs-string">"\t 停下来了嗷！！！"</span> + <span class="hljs-string">"表示FLAG=false，生产动作结束！"</span>);<br>    }<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">myProducer</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception<br>    {<br>        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">while</span>(FLAG)<br>        {<br>            result = blockingQueue.poll(<span class="hljs-number">2L</span>,TimeUnit.SECONDS);<br>            <span class="hljs-keyword">if</span>(<span class="hljs-literal">null</span> == result || result.equalIgnoreCase(<span class="hljs-string">""</span>))<br>            {<br>                FLAG = <span class="hljs-literal">false</span>;<br>                sout(Thread.currentThread().getName()+<span class="hljs-string">"\t 超过两秒没有取到产品，消费退出"</span>);<br>                <span class="hljs-keyword">return</span>;<br>            }<br>            sout(Thread.currentThread().getName()+<span class="hljs-string">"\t 消费队列"</span> + result + <span class="hljs-string">"成功"</span>);<br>        }<br>        <br>        sout(Thread.currentThread().getName()+<span class="hljs-string">"\t 停下来了嗷！！！"</span> + <span class="hljs-string">"表示FLAG=false，生产动作结束！"</span>);<br>    }<br>}<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>main代码块中的一些代码：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920151235.png" srcset="/img/loading.gif" lazyload alt="image-20210920151235614"></p>
<h2 id="Callable接口（第三种多线程方式）："><a href="#Callable接口（第三种多线程方式）：" class="headerlink" title="Callable接口（第三种多线程方式）："></a>Callable接口（第三种多线程方式）：</h2><ul>
<li>两个接口：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920151426.png" srcset="/img/loading.gif" lazyload alt="image-20210920151425701"></p>
<p>区别：</p>
<ol>
<li>Runnable没有返回值，Callable有返回值</li>
<li>Callable会抛出异常</li>
<li>接口需要实现的接口不一样嗷！！！</li>
</ol>
<ul>
<li><p>中间层同时适配了Callable和Runnable接口嗷！！FutureTask这个类同时实现了Callable接口和Runnable接口，是按了适配嗷！！！！</p>
</li>
<li><p>背景？为什么会出现呢？</p>
</li>
</ul>
<p>并发，异步导致。高并发最牛逼的控制嗷！！！初衷就是：麻烦的事儿交给别的线程去处理，实现高并发需要使用的嗷！！！</p>
<p>兔兔想法：实现更高程度的并行嗷！！！（分支合并操作嗷！！！）</p>
<ul>
<li>小建议：<ul>
<li>把get方法放在最后哦！！！get如果没有获取到值的话，会阻塞在这里嗷！！！</li>
<li>等它算完了再去取就会比较方便嗷！！！所以我们尽量放在后面取。</li>
<li>当然如果某一步就要结果，又不想阻塞的话，我们就可以类似于自旋锁，通过<code>futureTask.isDone()</code>来实现哦！！！</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920154316.png" srcset="/img/loading.gif" lazyload alt="image-20210920154316590"></p>
<p>提高了并行性嗷！！！</p>
<ul>
<li>如果启动了多个线程来抢着执行同一个任务呢？<ul>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920154710.png" srcset="/img/loading.gif" lazyload alt="image-20210920154709812"></li>
<li>不好意思，只执行了一次嗷！！！同样的动作就应该复用嗷！！！如果你真的想走两遍的话，再自己多去做一个FutureTask嗷！！！</li>
</ul>
</li>
</ul>
<h2 id="线程池使用以及优势（第四种多线程方式）："><a href="#线程池使用以及优势（第四种多线程方式）：" class="headerlink" title="线程池使用以及优势（第四种多线程方式）："></a>线程池使用以及优势（第四种多线程方式）：</h2><h3 id="概念："><a href="#概念：" class="headerlink" title="概念："></a>概念：</h3><ul>
<li>查看电脑CPU核数量：</li>
</ul>
<p><code>Runtime.getRuntime().availableProcessors()</code>可以获得硬件中可用的CPU的核数嗷！！！</p>
<ul>
<li>从new对象到IoC的反转，依赖注入 -&gt; 全都给你准备好，你直接复用我准备好的就成嗷！！！</li>
<li>底层就是阻塞队列嗷！！！</li>
<li>底层是<code>ThreadPoolExecutor ThreadPoolExecutor ThreadPoolExecutor</code>这个类嗷！！！Executor这个接口就对应了Executors这个工具类嗷！！！（和Array，Arrays一样的嗷！！！）</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163453.png" srcset="/img/loading.gif" lazyload alt="image-20210920163453304"></p>
<ul>
<li>了解：<ul>
<li><code>Executors.newScheduledThreadPool()</code>时间参数用于调度的</li>
<li><code>Executors.newWorkStealingPool(int)</code>可用的处理器作为它的并行级别</li>
</ul>
</li>
<li>重点：<ul>
<li><code>Executors.newFixedThreadPool(int)</code></li>
<li><code>Executors.newSingleThreadPool()</code></li>
<li><code>Executors.newCachedThreadPool(int)</code></li>
</ul>
</li>
</ul>
<h3 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h3><h4 id="newFixedThreadPool："><a href="#newFixedThreadPool：" class="headerlink" title="newFixedThreadPool："></a>newFixedThreadPool：</h4><ul>
<li><p>固定数目线程池，处理线程数目固定哦！！！</p>
</li>
<li><p>模拟十个用户用五个请求来进行处理嗷！！！</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920162740.png" srcset="/img/loading.gif" lazyload alt="image-20210920162739367"></p>
<p>处理结果：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920162759.png" srcset="/img/loading.gif" lazyload alt="image-20210920162759410"></p>
<ul>
<li>关闭比使用更加重要嗷！！！</li>
</ul>
<h4 id="newSingleThreadExecutor："><a href="#newSingleThreadExecutor：" class="headerlink" title="newSingleThreadExecutor："></a>newSingleThreadExecutor：</h4><ul>
<li>固定单个数目线程池</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920162925.png" srcset="/img/loading.gif" lazyload alt="image-20210920162925543"></p>
<h4 id="newCachedThreadPool："><a href="#newCachedThreadPool：" class="headerlink" title="newCachedThreadPool："></a>newCachedThreadPool：</h4><ul>
<li>线程池数目不固定，够用就好嗷！！！如果线程不够的话，还会自动扩容嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163118.png" srcset="/img/loading.gif" lazyload alt="image-20210920163117475"></p>
<ul>
<li>核心思想：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163153.png" srcset="/img/loading.gif" lazyload alt="image-20210920163152856"></p>
<p>我尽力办，我办的完的话，就ok。我要是办不完，我就摇人了嗷！！！</p>
<h4 id="总结："><a href="#总结：" class="headerlink" title="总结："></a>总结：</h4><ul>
<li>发现上面这三个玩意儿，底层都是<code>return new ThreadPoolExecutor(...)</code>！！！所以ThreadPoolExecutor如此重要嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163734.png" srcset="/img/loading.gif" lazyload alt="image-20210920163734036"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163752.png" srcset="/img/loading.gif" lazyload alt="image-20210920163751881"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920163820.png" srcset="/img/loading.gif" lazyload alt="image-20210920163820239"></p>
<ul>
<li><p>底层源码重点：</p>
<ul>
<li>ThreadPoolExecutor这个类很重要！！！</li>
<li>底层的阻塞队列也很重要嗷！！！！</li>
</ul>
</li>
<li><p>使用方法：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920164039.png" srcset="/img/loading.gif" lazyload alt="image-20210920164038942"></p>
<h3 id="七大参数简介："><a href="#七大参数简介：" class="headerlink" title="七大参数简介："></a>七大参数简介：</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920203544.png" srcset="/img/loading.gif" lazyload alt="image-20210920203543898"></p>
<ol>
<li>corePoolSize：常驻核心线程数</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920203809.png" srcset="/img/loading.gif" lazyload alt="image-20210920203809064"></p>
<ol start="2">
<li>maximumPoolSize：</li>
</ol>
<p>物理上线程池能够容纳的同时执行的最大线程数，此值必须大于等于1嗷！！！</p>
<ol start="3">
<li>keepAliveTime：</li>
</ol>
<p>多余的空闲线程的存活时间，当线程池数量超过CorePoolSize的时候，空闲时间达到keepAliveTime的值的时候，多余的空闲线程会被销毁直到只剩下corePoolSize个线程为止嗷！！！</p>
<p>没有业务了，“加班”的人会慢慢回退嗷！！！</p>
<ol start="4">
<li><p>unit：keepAliveTime的单位</p>
</li>
<li><p>workQueue：任务队列，被提交了，但是由于核心线程都被占用而无法执行，处于等待状态的任务嗷！！！</p>
</li>
</ol>
<p>类似于银行中的候客区</p>
<ol start="6">
<li><p>threadFactory：生成线程池中线程的线程工厂，用于创建线程，一般用默认的就可以了嗷！！！</p>
</li>
<li><p>handler：拒绝策略，如果线程池满了，阻塞队列都满了，那就……只能够采取一些操作了orz</p>
</li>
</ol>
<p>类似于银行网点，上班的人都在服务（但是还有多的空位），等待的人爆了，银行紧急通知其他休假的人赶紧赶回来上班嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920204832.png" srcset="/img/loading.gif" lazyload alt="image-20210920204832709"></p>
<p>当所有人都在上班了（物理线程池被占满了），候客区也满了，不好意思。我银行已经尽力的，多来的请求我就不收了。</p>
<h3 id="底层工作原理："><a href="#底层工作原理：" class="headerlink" title="底层工作原理："></a>底层工作原理：</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920210510.png" srcset="/img/loading.gif" lazyload alt="image-20210920210509956"></p>
<p>这幅图就是上面的银行网点那幅图嗷！！！</p>
<ul>
<li>主要处理流程：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920211449.png" srcset="/img/loading.gif" lazyload alt="image-20210920211449576"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920211539.png" srcset="/img/loading.gif" lazyload alt="image-20210920211539142"></p>
<h3 id="四种拒绝理论："><a href="#四种拒绝理论：" class="headerlink" title="四种拒绝理论："></a>四种拒绝理论：</h3><h4 id="大坑："><a href="#大坑：" class="headerlink" title="大坑："></a>大坑：</h4><ul>
<li>上面学的三种，实际开发中，<strong>一个都不用嗷！！！（超级大坑！！！）</strong></li>
<li>阿里开发手册：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920212314.png" srcset="/img/loading.gif" lazyload alt="image-20210920212314139"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920212414.png" srcset="/img/loading.gif" lazyload alt="image-20210920212414735"></p>
<p>就是这里说的，由于底层是链表，没有最大长度，默认是Integer.MAX_VALUE。这就一个非常大的问题，就是如果我一直往阻塞队列里面加请求，加满了，你的Linux也就爆了orz。</p>
<h4 id="自定义线程池："><a href="#自定义线程池：" class="headerlink" title="自定义线程池："></a>自定义线程池：</h4><p><code>ExecutorService threadPool = new ThreadPoolExecutor(2,5,1L,TimeUnit.SECONDS,new LinkedBlockingQueue&lt;Runnable&gt;(3),Executors.defaultThreadFactory(),new ThreadExecutor.AbortPolicy());</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920213917.png" srcset="/img/loading.gif" lazyload alt="image-20210920213917146"></p>
<ul>
<li>测试什么时候出问题呢？</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920214035.png" srcset="/img/loading.gif" lazyload alt="image-20210920214035505"></p>
<p>最大承载量 = maximumPoolSize + 阻塞队列最大长度，因此来9个时候可能出现这个问题嗷！！！</p>
<h4 id="AbortPolicy："><a href="#AbortPolicy：" class="headerlink" title="AbortPolicy："></a>AbortPolicy：</h4><ul>
<li>概念：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920211802.png" srcset="/img/loading.gif" lazyload alt="image-20210920211801937"></p>
<ul>
<li>种类：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920211826.png" srcset="/img/loading.gif" lazyload alt="image-20210920211826013"></p>
<ul>
<li>如上图所示，出了问题直接报错嗷，程序运行终止。</li>
</ul>
<h4 id="CallerRunsPolicy："><a href="#CallerRunsPolicy：" class="headerlink" title="CallerRunsPolicy："></a>CallerRunsPolicy：</h4><ul>
<li>调用者运行的一种调节机制，不会抛弃任务也不会抛出异常，而是将一些任务<strong>回退给调用者进行处理</strong>，从而降低流量嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920214706.png" srcset="/img/loading.gif" lazyload alt="image-20210920214706006"></p>
<p>这里就会退给main来处理了嗷！！！</p>
<h4 id="DiscardOldestPolicy："><a href="#DiscardOldestPolicy：" class="headerlink" title="DiscardOldestPolicy："></a>DiscardOldestPolicy：</h4><ul>
<li>抛弃等待最久的，将最新的加入到队列中再次尝试提交嗷！！！</li>
</ul>
<h4 id="DiscardPolicy："><a href="#DiscardPolicy：" class="headerlink" title="DiscardPolicy："></a>DiscardPolicy：</h4><ul>
<li>多来的直接就给了扔掉了嗷！！！</li>
</ul>
<h3 id="配置合理线程数："><a href="#配置合理线程数：" class="headerlink" title="配置合理线程数："></a>配置合理线程数：</h3><ul>
<li><p>熟悉硬件：</p>
<ol>
<li>CPU密集型</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920215354.png" srcset="/img/loading.gif" lazyload alt="image-20210920215354656"></p>
<ol start="2">
<li>IO密集型</li>
</ol>
<ul>
<li>I/O密集型任务线程并不是一直在执行任务，配置尽可能多的线程，如CPU核数*2</li>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920215528.png" srcset="/img/loading.gif" lazyload alt="image-20210920215528181"></li>
</ul>
</li>
</ul>
<h2 id="死锁编码及定位分析："><a href="#死锁编码及定位分析：" class="headerlink" title="死锁编码及定位分析："></a>死锁编码及定位分析：</h2><ul>
<li>两个火柴人拿枪指着对方orz，好家伙orz。</li>
</ul>
<h3 id="写个死锁呗："><a href="#写个死锁呗：" class="headerlink" title="写个死锁呗："></a>写个死锁呗：</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920220626.png" srcset="/img/loading.gif" lazyload alt="image-20210920220626213"></p>
<p>run没有写全，写全的版本在下面嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920220647.png" srcset="/img/loading.gif" lazyload alt="image-20210920220647467"></p>
<ul>
<li>main函数：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920221006.png" srcset="/img/loading.gif" lazyload alt="image-20210920221006854"></p>
<h3 id="小介绍："><a href="#小介绍：" class="headerlink" title="小介绍："></a>小介绍：</h3><ol>
<li>jps</li>
</ol>
<p>linux中<code>ps -ef | grep xxx</code></p>
<p>windows下的java运行程序捏？也有类似于ps查看进程的命令，但是目前我们需要查看的只是java的程序嗷！！</p>
<p>jps = java ps嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920222052.png" srcset="/img/loading.gif" lazyload alt="image-20210920222052258"></p>
<ol start="2">
<li>jstack</li>
</ol>
<p>jstack + <code>进程号</code></p>
<p>结合上面的jps一起使用，找到对应的线程编号，再查看线程的错误信息嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920222340.png" srcset="/img/loading.gif" lazyload alt="image-20210920222340886"></p>
<ul>
<li>summary：<ol>
<li>jsp命令定位进程号</li>
<li>jstack找到死锁查看</li>
</ol>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210920222637.png" srcset="/img/loading.gif" lazyload alt="image-20210920222637114"></p>
<h1 id="11-JVM-GC"><a href="#11-JVM-GC" class="headerlink" title="11. JVM+GC"></a>11. JVM+GC</h1><h2 id="复习串讲："><a href="#复习串讲：" class="headerlink" title="复习串讲："></a>复习串讲：</h2><ul>
<li>JVM内存结构：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922204116.png" srcset="/img/loading.gif" lazyload alt="image-20210922204101050"></p>
<ul>
<li>GC作用域：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922204138.png" srcset="/img/loading.gif" lazyload alt="image-20210922204137849"></p>
<ul>
<li><p>常见垃圾回收算法：</p>
<ol>
<li>引用计数：</li>
</ol>
<p>有对象应用+1，没对象-1，到0就回收。<strong>较难解决循环引用问题</strong>，因此JVM不采用这种方式。</p>
<ol start="2">
<li>复制算法：</li>
</ol>
<p>复制算法在年轻代中用</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205326.png" srcset="/img/loading.gif" lazyload alt="image-20210922205325740"></p>
<p>名言：复制之后有交换，谁空谁是To</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922204836.png" srcset="/img/loading.gif" lazyload alt="image-20210922204816262"></p>
<p>缺点就是复制大对象耗时，浪费空间嗷！！！</p>
<ol start="3">
<li>标记清除：</li>
</ol>
<p>Mark-Sweep，分为标记清除两个阶段。先标记出要回收的对象，然后统一回收这些对象。</p>
<p>好处：不用复制，耗时少了。</p>
<p>坏处：出现了内存碎片</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205103.png" srcset="/img/loading.gif" lazyload alt="image-20210922205102880"></p>
<ol start="4">
<li>标记清除整理：</li>
</ol>
<p>Mark-Compact</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205201.png" srcset="/img/loading.gif" lazyload alt="image-20210922205200495"></p>
<p>移动过程中，耗时比较多嗷！！！</p>
</li>
</ul>
<h2 id="如何确定垃圾-GCRoot："><a href="#如何确定垃圾-GCRoot：" class="headerlink" title="如何确定垃圾+GCRoot："></a>如何确定垃圾+GCRoot：</h2><ul>
<li><p>内存中不再被使用的空间就是垃圾</p>
</li>
<li><p>如何判断一个对象是否是垃圾？</p>
<ol>
<li>引用计数法：简单，但是循环引用解决不了</li>
<li>枚举根结点做可达性分析：</li>
</ol>
<p>复制，标记清除，标记压缩都要用GCRoots来判断哪些是垃圾嗷！！！</p>
</li>
<li><p>GCRoots：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205724.png" srcset="/img/loading.gif" lazyload alt="image-20210922205724103"></p>
<p>从GC对象进行扫描，看是否可达。</p>
<ul>
<li>哪些对象可以作为GC Roots对象：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922205901.png" srcset="/img/loading.gif" lazyload alt="image-20210922205901103"></p>
<ul>
<li>可以作为GCRoot的根呢？</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922210038.png" srcset="/img/loading.gif" lazyload alt="image-20210922210038211"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922210553.png" srcset="/img/loading.gif" lazyload alt="image-20210922210552919"></p>
<h2 id="JVM的参数介绍和调整："><a href="#JVM的参数介绍和调整：" class="headerlink" title="JVM的参数介绍和调整："></a>JVM的参数介绍和调整：</h2><h3 id="查看参数："><a href="#查看参数：" class="headerlink" title="查看参数："></a>查看参数：</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922215608.png" srcset="/img/loading.gif" lazyload alt="image-20210922215607756"></p>
<ul>
<li><p><code>-Xms和-Xmx</code>尽量调成一致，防止GC频繁收集，忽高忽低。</p>
</li>
<li><p>参数类型：</p>
<ol>
<li><p>标配参数：</p>
<ul>
<li>随着java变更，基本不会动的参数，没有大的变化。</li>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922210932.png" srcset="/img/loading.gif" lazyload alt="image-20210922210931972"></li>
</ul>
</li>
<li><p>X参数：</p>
<ul>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211038.png" srcset="/img/loading.gif" lazyload alt="image-20210922211037799"></li>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211115.png" srcset="/img/loading.gif" lazyload alt="image-20210922211114713"></li>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211133.png" srcset="/img/loading.gif" lazyload alt="image-20210922211132961"></li>
</ul>
</li>
<li><p>XX参数：</p>
</li>
</ol>
</li>
<li><p>Boolean类型：</p>
<pre><code class="hljs"> - ![image-20210922211322130](https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211322.png)
</code></pre>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211556.png" srcset="/img/loading.gif" lazyload alt="image-20210922211556106"></p>
<ul>
<li>先让一个程序空转，比如<code>sleep(Integer.MAX_VALUE)</code>：<ul>
<li><p>查看线程情况：</p>
<p><code>jps -l</code>和<code>jinfo</code>，这个jinfo是显示当前正在运行的线程的信息嗷！！！</p>
<ul>
<li>查看某个线程的情况：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922212646.png" srcset="/img/loading.gif" lazyload alt="image-20210922212646075"></p>
<ul>
<li>编辑参数：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922211446.png" srcset="/img/loading.gif" lazyload alt="image-20210922211446165"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922212743.png" srcset="/img/loading.gif" lazyload alt="image-20210922212743398"></p>
<p>开启参数之后再测试：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922212834.png" srcset="/img/loading.gif" lazyload alt="image-20210922212834155"></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>KV设值类型：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213125.png" srcset="/img/loading.gif" lazyload alt="image-20210922213125480"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213147.png" srcset="/img/loading.gif" lazyload alt="image-20210922213146784"></p>
<p>查出某个进程的Metaspace的默认设置：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213252.png" srcset="/img/loading.gif" lazyload alt="image-20210922213251833"></p>
<p>设置对应的值：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213407.png" srcset="/img/loading.gif" lazyload alt="image-20210922213406757"></p>
<p>例如这个MaxTenuringThreshold就是young区的对象进入老年区所需要的年纪嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213709.png" srcset="/img/loading.gif" lazyload alt="image-20210922213708933"></p>
<p>所以这里就可以看出来默认的一些配置嗷！！！</p>
<ul>
<li>jinfo的配置使用：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922213921.png" srcset="/img/loading.gif" lazyload alt="image-20210922213920863"></p>
<p>-flags：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922214035.png" srcset="/img/loading.gif" lazyload alt="image-20210922214035429"></p>
<p>这个东西是要求得到运行中的线程的id，再去flags才能看得到的嗷！！！</p>
<p><code>Non-default</code>是系统干的，帮我们自动配置好的。</p>
<p><code>Command line</code>是我们自己配置的嗷！！！</p>
<ul>
<li>题外话，坑题（-Xms和-Xmx如何解释？）</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922214901.png" srcset="/img/loading.gif" lazyload alt="image-20210922214901303"></p>
<p>这两个参数也是一样样的，本质上就是-XX参数，用的多。这两个不属于<code>X</code>参数哈，还是属于<code>XX</code>参数嗷！！！只是用到多，单独提出来方便使用而已嗷！！！这两个值一般都是配置成一样的嗷！！！这样才能保证GC尽可能少哦！！！</p>
<h3 id="查看参数二："><a href="#查看参数二：" class="headerlink" title="查看参数二："></a>查看参数二：</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922215640.png" srcset="/img/loading.gif" lazyload alt="image-20210922215639580"></p>
<ul>
<li>方式：</li>
</ul>
<ol>
<li><code>-XX:+PrintFlagsInitial</code>查看初始参数值</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922215725.png" srcset="/img/loading.gif" lazyload alt="image-20210922215725094"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922215803.png" srcset="/img/loading.gif" lazyload alt="image-20210922215802398"></p>
<ol start="2">
<li><code>-XX:+PrintFlagsFinal</code>查看修改更新的参数值</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922220037.png" srcset="/img/loading.gif" lazyload alt="image-20210922220037254"></p>
<ul>
<li><code>=和:=</code><ul>
<li>等于是没有被改过的初始值</li>
<li><code>:=</code>是我们人为改过的或者是JVM加载的时候修改过的参数值嗷！！！</li>
</ul>
</li>
<li>-version的话，只是在最后多打出了JVM的版本号而已嗷！！！</li>
<li>命令行修改：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922220932.png" srcset="/img/loading.gif" lazyload alt="image-20210922220932163"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922220945.png" srcset="/img/loading.gif" lazyload alt="image-20210922220945294"></p>
<p>修改之后，运行T之后，可以看出来元空间的值发生了变化嗷！！！</p>
<ol start="3">
<li><code>-XX:+PrintCommandLineFlags</code>打印命令行参数</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210922221211.png" srcset="/img/loading.gif" lazyload alt="image-20210922221211484"></p>
<p>这个命令最方便就是看最后一个参数！！！垃圾回收器的种类和默认参数嗷！！！</p>
<h2 id="JVM基本配置："><a href="#JVM基本配置：" class="headerlink" title="JVM基本配置："></a>JVM基本配置：</h2><h3 id="Java8调整："><a href="#Java8调整：" class="headerlink" title="Java8调整："></a>Java8调整：</h3><ul>
<li>Java的MetaSpace：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923085939.png" srcset="/img/loading.gif" lazyload alt="image-20210923085939278"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923090428.png" srcset="/img/loading.gif" lazyload alt="image-20210923090428487"></p>
<ul>
<li>通过程序获得初始内存大小和最大的堆内存大小：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923090141.png" srcset="/img/loading.gif" lazyload alt="image-20210923090141078"></p>
<h3 id="通用参数："><a href="#通用参数：" class="headerlink" title="通用参数："></a>通用参数：</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923090542.png" srcset="/img/loading.gif" lazyload alt="image-20210923090542706"></p>
<ol>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923090615.png" srcset="/img/loading.gif" lazyload alt="image-20210923090615310"></li>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923091333.png" srcset="/img/loading.gif" lazyload alt="image-20210923091332550"></li>
</ol>
<ul>
<li>如何配置：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923091427.png" srcset="/img/loading.gif" lazyload alt="image-20210923091426848"></p>
<p>注意：<strong>栈管运行，堆管存储</strong>嗷！！！！这个栈是线程运行的时候所拥有的栈的大小</p>
<p>当我们不配置-Xss参数的时候，出现了神奇的问题：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923091541.png" srcset="/img/loading.gif" lazyload alt="image-20210923091541472"></p>
<p>它默认值为0</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923091733.png" srcset="/img/loading.gif" lazyload alt="image-20210923091733044"></p>
<p>这里为0其实上表示采用系统的默认值，默认值又是多少呢？上图实际上告诉我们了嗷！！！（这个东西在Java的官方文档中都有嗷！！！）</p>
<ol start="3">
<li><code>-Xmn</code>：设置年轻代的大小嗷！！！</li>
</ol>
<ul>
<li>一般自己不用调，采用系统默认的</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923092140.png" srcset="/img/loading.gif" lazyload alt="image-20210923092139544"></p>
<ol start="4">
<li><code>-XX:MetaspaceSize</code></li>
</ol>
<h4 id="典型参数设置案例："><a href="#典型参数设置案例：" class="headerlink" title="典型参数设置案例："></a>典型参数设置案例：</h4><ul>
<li>设置元空间大小：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923092248.png" srcset="/img/loading.gif" lazyload alt="image-20210923092247567"></p>
<ul>
<li>坑：</li>
</ul>
<p>虽然说着元空间有这么多可以用，但是元空间自己取的少啊orz，就有可能报<code>OOM:Metaspace</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923092536.png" srcset="/img/loading.gif" lazyload alt="image-20210923092536820"></p>
<p>这里默认值就20多M而已啊orz，我内存16个G呢orz。</p>
<ul>
<li>为了保证不会出现OOM：</li>
</ul>
<p>参数配置实例：</p>
<p>下面是我们要手动配置的参数：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923092916.png" srcset="/img/loading.gif" lazyload alt="image-20210923092916447"></p>
<p><code>-XX:+UserSerialGC</code>是串行垃圾回收器嗷！！！</p>
<p>默认设置也可以瞅一眼哦：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093114.png" srcset="/img/loading.gif" lazyload alt="image-20210923093113771"></p>
<p>运行结果：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093152.png" srcset="/img/loading.gif" lazyload alt="image-20210923093152554"></p>
<p>查看默认参数：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093223.png" srcset="/img/loading.gif" lazyload alt="image-20210923093223512"></p>
<p>可以看到默认是这些，我们修改之后再康康嗷！！！</p>
<p>我们配置一下上面最开始提到的参数：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093335.png" srcset="/img/loading.gif" lazyload alt="image-20210923093334904"></p>
<p>参数设置后的结果：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923093511.png" srcset="/img/loading.gif" lazyload alt="image-20210923093511004"></p>
<p>完全按照我们的配置来启动了嗷！！！</p>
<ol start="5">
<li><code>-XX:+PrintGCDetails</code></li>
</ol>
<ul>
<li>输出GC的详细收集日志信息</li>
<li>可以通过限定堆的大小，然后人为new一个贼大的对象来构造GC的错误嗷，这个过程中会产生GC嗷！！！</li>
</ul>
<p>上下是对应的嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923182346.png" srcset="/img/loading.gif" lazyload alt="image-20210923182346063"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923182405.png" srcset="/img/loading.gif" lazyload alt="image-20210923182404627"></p>
<p>规律：<code>[名称： GC前内存占用 -&gt; GC后内存占用(该区总内存大小)]</code></p>
<ol start="6">
<li><code>SurvivorRatio</code></li>
</ol>
<ul>
<li>设置新生代中eden区和S0/S1空间的比例。</li>
<li>默认：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923182945.png" srcset="/img/loading.gif" lazyload alt="image-20210923182944953"></p>
<ul>
<li>查看默认参数：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923183152.png" srcset="/img/loading.gif" lazyload alt="image-20210923183152525"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923183235.png" srcset="/img/loading.gif" lazyload alt="image-20210923183235580"></p>
<p>改了之后再打印就是我们修改之后的值了嗷！！！</p>
<ol start="7">
<li><code>-XX:NewRatio</code></li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923185443.png" srcset="/img/loading.gif" lazyload alt="image-20210923185442895"></p>
<p>设置老年代占比，剩下1给新生代</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923185749.png" srcset="/img/loading.gif" lazyload alt="image-20210923185749201"></p>
<p>默认就是1：2嗷！！！</p>
<ol start="8">
<li><code>-XX:MaxTenuringThreshold</code></li>
</ol>
<ul>
<li>设置垃圾的最大年龄，超过这个年龄就从年轻代进入老年代嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923185951.png" srcset="/img/loading.gif" lazyload alt="image-20210923185951515"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923190031.png" srcset="/img/loading.gif" lazyload alt="image-20210923190031165"></p>
<p>通过这个参数就可以设置垃圾的最大年龄嗷！！！</p>
<h2 id="四种引用："><a href="#四种引用：" class="headerlink" title="四种引用："></a>四种引用：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923190412.png" srcset="/img/loading.gif" lazyload alt="image-20210923190412091"></p>
<ol>
<li>强引用（默认支持模式）</li>
</ol>
<p><code>Book book = new Book("兔子姐姐的小窝")</code></p>
<ul>
<li>当内存不足，JVM开始垃圾回收，对于强引用的对象，<strong>就算是出现了OOM也不会对于这个对象进行回收</strong>嗷！！！死都不收！！！</li>
</ul>
<ol start="2">
<li>软引用</li>
</ol>
<ul>
<li>内存足够的前提下我不收（就算手动GC也不回收哦，我够用嘛！！！），内存不够的情况收了你，来保证尽量不要出现OOM嗷！！！</li>
<li>软引用是相对强引用弱化了一些的引用，需要用<code>java.lang.ref.SoftReference</code>类来实现，可以让对象豁免一些垃圾回收。</li>
<li>通常用到对于内存敏感的程序中，高速缓存中就有用到嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923190911.png" srcset="/img/loading.gif" lazyload alt="image-20210923190911406"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191004.png" srcset="/img/loading.gif" lazyload alt="image-20210923191004767"></p>
<p>注意上面这里哈，实际上告诉了我们获得软引用的方式嗷！！！</p>
<ul>
<li>故意整活：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191149.png" srcset="/img/loading.gif" lazyload alt="image-20210923191149341"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191208.png" srcset="/img/loading.gif" lazyload alt="image-20210923191208008"></p>
<p>5M的小内存，分配了30M的对象，必垃圾回收嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191308.png" srcset="/img/loading.gif" lazyload alt="image-20210923191308316"></p>
<ul>
<li>使用场景：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923192051.png" srcset="/img/loading.gif" lazyload alt="image-20210923192050793"></p>
<p><code>Map&lt;String,SoftReference&lt;Bitmap&gt;&gt; imageCache = new Hashmap&lt;String,SoftReference&lt;Bitmap&gt;&gt;();</code></p>
<p>在保证我程序正常运行的情况下，把空间给你多存一点照片，提高你的效率，这是好事儿。但是如果我都不够用了，那我就不客气了，把你收了嗷，保证不OOM最重要嗷！！！</p>
<ol start="3">
<li>弱应用</li>
</ol>
<ul>
<li>不管够不够用，垃圾回收一律都收掉嗷！！！不管啥情况，回收我就收了你！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191526.png" srcset="/img/loading.gif" lazyload alt="image-20210923191525848"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923191539.png" srcset="/img/loading.gif" lazyload alt="image-20210923191539510"></p>
<ul>
<li>使用场景：</li>
</ul>
<p><code>WeakHashMap</code></p>
<p>key是弱key，如果被垃圾回收了的话，这个entry就会被自动移除嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194114.png" srcset="/img/loading.gif" lazyload alt="image-20210923194113847"></p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Node</span>&lt;K,V&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Map</span>.Entry&lt;K,V&gt; {<br>    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> hash;<br>    <span class="hljs-keyword">final</span> K key;<br>    V value;<br>    Node&lt;K,V&gt; next;<br><br>    Node(<span class="hljs-type">int</span> hash, K key, V value, Node&lt;K,V&gt; next) {<br>        <span class="hljs-built_in">this</span>.hash = hash;<br>        <span class="hljs-built_in">this</span>.key = key;<br>        <span class="hljs-built_in">this</span>.value = value;<br>        <span class="hljs-built_in">this</span>.next = next;<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> K <span class="hljs-title function_">getKey</span><span class="hljs-params">()</span>        { <span class="hljs-keyword">return</span> key; }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> V <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span>      { <span class="hljs-keyword">return</span> value; }<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> key + <span class="hljs-string">"="</span> + value; }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hashCode</span><span class="hljs-params">()</span> {<br>        <span class="hljs-keyword">return</span> Objects.hashCode(key) ^ Objects.hashCode(value);<br>    }<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> V <span class="hljs-title function_">setValue</span><span class="hljs-params">(V newValue)</span> {<br>        <span class="hljs-type">V</span> <span class="hljs-variable">oldValue</span> <span class="hljs-operator">=</span> value;<br>        value = newValue;<br>        <span class="hljs-keyword">return</span> oldValue;<br>    }<br></code></pre></td></tr></tbody></table></figure>

<p>底层本质是一个Node的数据结构，实现了Map的Entry，比如上面，本质上put的时候，map底层新建立了一个Node，Node中的key的引用就是传入的Integer的应用，因此如果你修改的是key的话，实际上对于对应位置的引用没有任何的改变，因此这个打印出来的结果还是上面那个结果嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194648.png" srcset="/img/loading.gif" lazyload alt="image-20210923194648193"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194711.png" srcset="/img/loading.gif" lazyload alt="image-20210923194711738"></p>
<p>这个key不会阻止垃圾回收嗷，如果key失效了，就会被remove嗷！！！</p>
<p>适用于对于内存敏感的使用嗷！！！</p>
<ol start="4">
<li>虚引用：</li>
</ol>
<ul>
<li>又被称为幽灵引用</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194905.png" srcset="/img/loading.gif" lazyload alt="image-20210923194905029"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923194930.png" srcset="/img/loading.gif" lazyload alt="image-20210923194930822"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923195019.png" srcset="/img/loading.gif" lazyload alt="image-20210923195019141"></p>
<ul>
<li>回收之前需要被引用队列保存一下嗷！！！</li>
<li>弱引用队列的例子：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923200814.png" srcset="/img/loading.gif" lazyload alt="image-20210923200814571"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923200755.png" srcset="/img/loading.gif" lazyload alt="image-20210923200754945"></p>
<ul>
<li>虚引用队列的例子：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923201325.png" srcset="/img/loading.gif" lazyload alt="image-20210923201325447"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923201500.png" srcset="/img/loading.gif" lazyload alt="image-20210923201500175"></p>
<p>重点就是后续操作，可以做一些通知之类的嗷！！！</p>
<h2 id="GCRoots-四大引用小总结："><a href="#GCRoots-四大引用小总结：" class="headerlink" title="GCRoots + 四大引用小总结："></a>GCRoots + 四大引用小总结：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210923201825.png" srcset="/img/loading.gif" lazyload alt="image-20210923201825458"></p>
<ul>
<li>Java中可以作为GC Roots的对象：<ul>
<li>虚拟机栈（栈帧中的局部变量区，也叫做局部变量表）。</li>
<li>方法区中的类静态属性引用的对象。</li>
<li>方法区中常量引用的对象。</li>
<li>本地方法栈中JNI（Native方法）引用的对象</li>
</ul>
</li>
</ul>
<h1 id="12-SOFE"><a href="#12-SOFE" class="headerlink" title="12. SOFE"></a>12. SOFE</h1><h2 id="各种异常分类："><a href="#各种异常分类：" class="headerlink" title="各种异常分类："></a>各种异常分类：</h2><p><strong>栈管运行，堆管存储。</strong></p>
<ol>
<li>StackOverflowError</li>
</ol>
<p>这里的栈就是程序运行时对应的栈，由于内存不大，在调用方法的时候就会压栈，我们可以人为构造循环调用方法来制造SOFE：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924203911.png" srcset="/img/loading.gif" lazyload alt="image-20210924203910628"></p>
<p>这个是错误，不是异常嗷！！！异常是Exception，错误是Error：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43698561/article/details/104382643">下面这个就是Error和Exception的解释嗷！！！</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204413.png" srcset="/img/loading.gif" lazyload alt="image-20210924204413080"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204613.png" srcset="/img/loading.gif" lazyload alt="image-20210924204613291"></p>
<p>栈爆了。</p>
<ol start="2">
<li>OOM：java heap space</li>
</ol>
<p>先把heap的大小调小：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204801.png" srcset="/img/loading.gif" lazyload alt="image-20210924204800557"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204859.png" srcset="/img/loading.gif" lazyload alt="image-20210924204858781">不断新建对象，这样就可以了嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924204932.png" srcset="/img/loading.gif" lazyload alt="image-20210924204932664"></p>
<p>上面这样也行，直接new一个80M的数组，上面调过堆内存只有10M，这个对象远远大于10M。</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924205022.png" srcset="/img/loading.gif" lazyload alt="image-20210924205021400"></p>
<p>这个也是个Error嗷！！！堆爆了。</p>
<ol start="3">
<li>OOM：GC overhead limit exceeded</li>
</ol>
<ul>
<li>程序特别诡异，Java内存急剧上升，大量对象被装载被创建出来。启动GC之后，超过最高警戒了。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924205328.png" srcset="/img/loading.gif" lazyload alt="image-20210924205327339"></p>
<ul>
<li>GC反复执行，恶行循环，执行存在非常大的问题嗷！！！</li>
<li>实例：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924210445.png" srcset="/img/loading.gif" lazyload alt="image-20210924210445570"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924210625.png" srcset="/img/loading.gif" lazyload alt="image-20210924210624990"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924210648.png" srcset="/img/loading.gif" lazyload alt="image-20210924210647590"></p>
<ol start="4">
<li>OOM：Direct buffer memory</li>
</ol>
<ul>
<li>是由于底层NIO引起的嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924211359.png" srcset="/img/loading.gif" lazyload alt="image-20210924211358960"></p>
<p>里面够用，外面用满了orz。默认堆外可用内存是总内存的1/4嗷！！！</p>
<ul>
<li>示例代码：</li>
</ul>
<p>查看本地可用的JVM内存：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924211557.png" srcset="/img/loading.gif" lazyload alt="image-20210924211557162"></p>
<p>内存的图：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924213350.png" srcset="/img/loading.gif" lazyload alt="image-20210924213349784"></p>
<p>内存：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924213444.png" srcset="/img/loading.gif" lazyload alt="image-20210924213444653"></p>
<ul>
<li>下面是示例哈，把外部内存的可用参数调成5M之后，在内存中new一个6M的对象，就会出现上面的问题嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924213507.png" srcset="/img/loading.gif" lazyload alt="image-20210924213507575"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924214305.png" srcset="/img/loading.gif" lazyload alt="image-20210924214304637"></p>
<p>这个问题就是由于NIO所引出的哦，面试的时候就有可能问你这个<code>Direct buffer memory</code>的问题，来刺探你是否使用过NIO嗷！！！</p>
<ol start="5">
<li>OOM：unable to create new native thread</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924215151.png" srcset="/img/loading.gif" lazyload alt="image-20210924215151360"></p>
<ul>
<li>准确的讲，该native thread异常与对应的平台有关。说白了就是：创建的线程的数量超过了系统允许的最大值嗷，导致出现了这个异常嗷！！！！！</li>
<li>示例：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924220700.png" srcset="/img/loading.gif" lazyload alt="image-20210924220700427"></p>
<p>Linux中默认允许单个进程可以创建的线程数是1024嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210924221132.png" srcset="/img/loading.gif" lazyload></p>
<ul>
<li><p>解决方案：</p>
<ol>
<li>减少跑起来的线程数</li>
<li>扩大底层机器允许的最大线程数</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925150440.png" srcset="/img/loading.gif" lazyload alt="image-20210925150439766"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925150525.png" srcset="/img/loading.gif" lazyload alt="image-20210925150524905"></p>
<p>注意，linux下的root用户对于线程是没有上限的，其他用户默认一个进程最多创建的线程数就是1024，修改：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925150621.png" srcset="/img/loading.gif" lazyload alt="image-20210925150621473"></p>
</li>
</ul>
<ol start="6">
<li>OOM：Metaspace</li>
</ol>
<ul>
<li>元空间是方法区，方法区装类的模板，常量池啊之类的东东。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925150910.png" srcset="/img/loading.gif" lazyload alt="image-20210925150909936"></p>
<ul>
<li>元空间与持久代的最大区别：Metaspace并不在虚拟机内存中，而是使用本地内存。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925151016.png" srcset="/img/loading.gif" lazyload alt="image-20210925151015937"></p>
<ul>
<li>示例：</li>
</ul>
<p>设置元空间的大小为8M：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925151905.png" srcset="/img/loading.gif" lazyload alt="image-20210925151904788"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925151930.png" srcset="/img/loading.gif" lazyload alt="image-20210925151929884"></p>
<h2 id="GC垃圾回收器的理解："><a href="#GC垃圾回收器的理解：" class="headerlink" title="GC垃圾回收器的理解："></a>GC垃圾回收器的理解：</h2><ul>
<li>GC有四种垃圾回收算法（引用计数/复制/标记清除/标记整理），垃圾收集器本质上就是这些算法的落地实现。</li>
<li>没有完美的垃圾收集器，都有具体的使用场景嗷！！！</li>
<li>四种垃圾收集器</li>
</ul>
<h3 id="垃圾收集器策略："><a href="#垃圾收集器策略：" class="headerlink" title="垃圾收集器策略："></a>垃圾收集器策略：</h3><h4 id="Serial"><a href="#Serial" class="headerlink" title="Serial"></a>Serial</h4><ul>
<li>串行</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925152550.png" srcset="/img/loading.gif" lazyload alt="image-20210925152550265"></p>
<ul>
<li>为单线程环境设计，只使用一个线程进行回收，并且会<strong>暂停全部的用户线程</strong>，不适用于服务器环境。（中间业务线程被打断了orz）</li>
</ul>
<h4 id="Parallel"><a href="#Parallel" class="headerlink" title="Parallel"></a>Parallel</h4><ul>
<li>并行</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925152745.png" srcset="/img/loading.gif" lazyload alt="image-20210925152745385"></p>
<ul>
<li>多个垃圾收集线程并行工作，此时用户线程是暂停的，适用于科学计算 / 大数据处理等弱前台交互系统。</li>
<li>停顿回收垃圾的时间回比串行少，但是仍然和前面一样的，需要把所有的用户线程<strong>停下来</strong>！！！</li>
</ul>
<h4 id="CMS"><a href="#CMS" class="headerlink" title="CMS"></a>CMS</h4><ul>
<li>并发垃圾回收器（并发标记垃圾清除）</li>
<li>用户线程和垃圾回收线程同时执行（不一定是并行，有可能交替执行），不需要停顿用户线程。互联网公司大多都用CMS，它适用于对于<strong>响应时间有要求的场景</strong>。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153059.png" srcset="/img/loading.gif" lazyload alt="image-20210925153058844"></p>
<h4 id="小总结："><a href="#小总结：" class="headerlink" title="小总结："></a>小总结：</h4><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153238.png" srcset="/img/loading.gif" lazyload alt="image-20210925153237964"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153256.png" srcset="/img/loading.gif" lazyload alt="image-20210925153256070"></p>
<h4 id="G1"><a href="#G1" class="headerlink" title="G1"></a>G1</h4><ul>
<li>将堆内存分割为不同的区域，然后并发对于不同的区域进行垃圾回收嗷！！！</li>
</ul>
<h4 id="ZGC"><a href="#ZGC" class="headerlink" title="ZGC"></a>ZGC</h4><ul>
<li><p>G1的升级版本</p>
</li>
<li><p>比较新，Java12之后才出现的，需要自己下去看看嗷！</p>
</li>
</ul>
<h2 id="服务器默认垃圾收集器查看："><a href="#服务器默认垃圾收集器查看：" class="headerlink" title="服务器默认垃圾收集器查看："></a>服务器默认垃圾收集器查看：</h2><ul>
<li>GC深透明细，思想：四大垃圾回收算法 —&gt;&gt;&gt; 落地实现</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153851.png" srcset="/img/loading.gif" lazyload alt="image-20210925153851252"></p>
<ul>
<li>打印出垃圾收集器：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925153935.png" srcset="/img/loading.gif" lazyload alt="image-20210925153934881"></p>
<p>默认使用的是并行垃圾回收器</p>
<ul>
<li>设置垃圾收集器：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925154143.png" srcset="/img/loading.gif" lazyload alt="image-20210925154143267"></p>
<h2 id="默认垃圾收集器有哪些？"><a href="#默认垃圾收集器有哪些？" class="headerlink" title="默认垃圾收集器有哪些？"></a>默认垃圾收集器有哪些？</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925154304.png" srcset="/img/loading.gif" lazyload alt="image-20210925154304571"></p>
<ul>
<li>CMS（ConcMarkSystem）</li>
<li>总共理论上有七种的，UseSerialOldGC和引用计数一样，已经被这个时代废除了，源码中也看不到了，但是它曾经存在过嗷！！！</li>
<li>查看某个运行中的进程的垃圾回收器：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925155113.png" srcset="/img/loading.gif" lazyload alt="image-20210925155113074"></p>
<h2 id="七种垃圾收集器："><a href="#七种垃圾收集器：" class="headerlink" title="七种垃圾收集器："></a>七种垃圾收集器：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925155942.png" srcset="/img/loading.gif" lazyload alt="image-20210925155941812"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925160146.png" srcset="/img/loading.gif" lazyload alt="image-20210925160145418"></p>
<ul>
<li>年轻代更多使用复制算法，老年代我们更多使用标记清除或者标记整理算法。</li>
</ul>
<h3 id="部分参数说明-x2F-C-x2F-S模式有什么区别"><a href="#部分参数说明-x2F-C-x2F-S模式有什么区别" class="headerlink" title="部分参数说明 / C/S模式有什么区别"></a>部分参数说明 / C/S模式有什么区别</h3><ul>
<li><p>参数：</p>
<ul>
<li>DefNew - Default New Generation</li>
<li>Tenured - Old</li>
<li>ParNew - Parallel New Generation</li>
<li>PSYoungGen - Parallel Scanvenge Young Generation</li>
<li>ParOldGen - Parallel Old Generation</li>
</ul>
</li>
<li><p>C/S模式：</p>
<ul>
<li>只需要掌握Server模式即可，Client模式基本不会用</li>
<li>操作系统：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925160643.png" srcset="/img/loading.gif" lazyload alt="image-20210925160642642"></p>
</li>
</ul>
<h3 id="新生代："><a href="#新生代：" class="headerlink" title="新生代："></a>新生代：</h3><ul>
<li>Young和Old的垃圾收集器是搭配使用的嗷，注意上面那张图图捏！！！新生代的指定了，老年代的基本上就确定了嗷！！！</li>
</ul>
<h4 id="Serial-x2F-Serial-Copying："><a href="#Serial-x2F-Serial-Copying：" class="headerlink" title="Serial / Serial Copying："></a>Serial / Serial Copying：</h4><ul>
<li>串行+串行</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925161602.png" srcset="/img/loading.gif" lazyload alt="image-20210925161602019"></p>
<p>简单高效，没有线程交互的开销，可以获得最高的单线程垃圾收集效率，因此Serial垃圾收集器依然是Java虚拟机运行在Clinet模式下默认的垃圾收集器</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925161807.png" srcset="/img/loading.gif" lazyload alt="image-20210925161807280"></p>
<ul>
<li>Y和O都是Serial回收，只是回收过程中，采取的回收算法不一样而已嗷！！！</li>
</ul>
<h4 id="ParNew："><a href="#ParNew：" class="headerlink" title="ParNew："></a>ParNew：</h4><ul>
<li>并行+串行</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925162131.png" srcset="/img/loading.gif" lazyload alt="image-20210925162130287"></p>
<ul>
<li>年轻代的ParNew是搭配老年代的CMS使用的嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925162840.png" srcset="/img/loading.gif" lazyload alt="image-20210925162839624"></p>
<h4 id="ParallelScanvenge："><a href="#ParallelScanvenge：" class="headerlink" title="ParallelScanvenge："></a>ParallelScanvenge：</h4><ul>
<li>并行+并行</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163018.png" srcset="/img/loading.gif" lazyload alt="image-20210925163017590"></p>
<ul>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163201.png" srcset="/img/loading.gif" lazyload alt="image-20210925163200837"></li>
</ul>
<p>串行收集器在新生代和老年代的并行化</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163326.png" srcset="/img/loading.gif" lazyload alt="image-20210925163325742"></p>
<ul>
<li>配置这个模式：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163434.png" srcset="/img/loading.gif" lazyload alt="image-20210925163433318"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163508.png" srcset="/img/loading.gif" lazyload alt="image-20210925163508148"></p>
<h3 id="老年代："><a href="#老年代：" class="headerlink" title="老年代："></a>老年代：</h3><h4 id="Serial-Old-x2F-Serial-MSC："><a href="#Serial-Old-x2F-Serial-MSC：" class="headerlink" title="Serial Old / Serial MSC："></a>Serial Old / Serial MSC：</h4><ul>
<li>老年代的串行收集器</li>
<li>单线程+标记整理算法，这个收集器也是主要运行在Client默认的java虚拟机默认的老年代垃圾收集器。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925172206.png" srcset="/img/loading.gif" lazyload alt="image-20210925172206379"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925172228.png" srcset="/img/loading.gif" lazyload alt="image-20210925172227843"></p>
<ul>
<li>已经优化掉了，都不用了都orz</li>
</ul>
<h4 id="Parallel-Old："><a href="#Parallel-Old：" class="headerlink" title="Parallel Old："></a>Parallel Old：</h4><ul>
<li><p>并行+并行</p>
</li>
<li><p>Parallel Scavenge的老年代版本，使用多线程的标记-整理算法，Parallel Old收集器在1.6才开始使用嗷！！！</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925163901.png" srcset="/img/loading.gif" lazyload alt="image-20210925163901411"></p>
<ul>
<li>不加的话默认使用的是<code>UseParrellelGC</code>，就在上面，所以老年代默认的也是使用Parallel Old嗷！！！</li>
</ul>
<h4 id="CMS："><a href="#CMS：" class="headerlink" title="CMS："></a>CMS：</h4><ul>
<li>并发标记清除GC（CMS）</li>
<li>好处：解决空间和时间，坏处：内存碎片</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925170643.png" srcset="/img/loading.gif" lazyload alt="image-20210925170642985"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925170707.png" srcset="/img/loading.gif" lazyload alt="image-20210925170707008"></p>
<ul>
<li>过程：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925170740.png" srcset="/img/loading.gif" lazyload alt="image-20210925170740207"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925171346.png" srcset="/img/loading.gif" lazyload alt="image-20210925171345757"></p>
<p>1，3要停，2，4不要停：</p>
<p>重新标记：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925171053.png" srcset="/img/loading.gif" lazyload alt="image-20210925171053270"></p>
<p>并发清除：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925171123.png" srcset="/img/loading.gif" lazyload alt="image-20210925171123242"></p>
<p>标记和清除这两个最耗时的操作，可以并发执行嗷！！！</p>
<ul>
<li>优缺点：<ul>
<li>优点：并发收集低停顿</li>
<li>缺点：并发执行，CMS在收集与应用线程会同时增减对于堆内存的占用，CPU的压力比较大！！！CMS必须在老年代堆内存用尽之前完成垃圾回收，否则就会回收失败，触发担保机制。串行老年代收集器将会以STW的方式进行一次GC，从而造成较大停顿时间。此外，标记清除算法会导致大量碎片嗷！！！</li>
</ul>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925171815.png" srcset="/img/loading.gif" lazyload alt="image-20210925171814442"></p>
<ul>
<li>同时配置多个垃圾收集器：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925172417.png" srcset="/img/loading.gif" lazyload alt="image-20210925172416956"></p>
<p>关联激活，完全没有必要这么去写嗷！！！</p>
<h2 id="选择合适的垃圾收集器："><a href="#选择合适的垃圾收集器：" class="headerlink" title="选择合适的垃圾收集器："></a>选择合适的垃圾收集器：</h2><ul>
<li>适用场景：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925172835.png" srcset="/img/loading.gif" lazyload alt="image-20210925172835478"></p>
<ul>
<li>对应关系：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210925173108.png" srcset="/img/loading.gif" lazyload alt="image-20210925173107600"></p>
<h2 id="G1垃圾回收器："><a href="#G1垃圾回收器：" class="headerlink" title="G1垃圾回收器："></a>G1垃圾回收器：</h2><ul>
<li>G1又被称为<code>Garbage-First</code>嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926191656.png" srcset="/img/loading.gif" lazyload alt="image-20210926191553163"></p>
<ul>
<li>打印结果显示：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926191729.png" srcset="/img/loading.gif" lazyload alt="image-20210926191630759"></p>
<p>别的都有两个区哦这里，G1只有一个garbage-first heap，这就是上面所提到过的，G1横跨两个区哦！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926191942.png" srcset="/img/loading.gif" lazyload alt="image-20210926191942141"></p>
<p>G1是一种服务端的垃圾收集器，应用在<strong>多处理器和大容量内存环境</strong>中，实现高吞吐量的同时，尽可能满足垃圾收集暂停时间的要求。</p>
<ul>
<li><p>特性：</p>
<ol>
<li>像CMS一样，能与应用程序并发执行</li>
<li>整理空闲时间空间更快</li>
<li>需要更多的时间来预测GC停顿时间</li>
<li>不希望牺牲大量的吞吐性能</li>
<li>不需要更大的Java Heap</li>
</ol>
</li>
<li><p>G1就是为了取代CMS而被设计的，不会产生很多内存碎片，而且添加了预测机制，用户可以指定期望停顿时间嗷！！！</p>
</li>
<li><p>Eden和Survivor和Tenured等区域不再是连续的，而是变成了一个个大小一样的region。</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926192932.png" srcset="/img/loading.gif" lazyload alt="image-20210926192932201"></p>
<p>Java9开始就作为默认的垃圾收集器了嗷！！！</p>
<ul>
<li>特点：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926193156.png" srcset="/img/loading.gif" lazyload alt="image-20210926193155568"></p>
<h3 id="底层原理：-1"><a href="#底层原理：-1" class="headerlink" title="底层原理："></a>底层原理：</h3><ul>
<li><p>Region区域化垃圾收集器，化整为零，避免全内存扫描，只需要按照区域进行内存扫描嗷！！！</p>
</li>
<li><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926193424.png" srcset="/img/loading.gif" lazyload alt="image-20210926193423711"></p>
</li>
<li><p>G1的改变：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926193704.png" srcset="/img/loading.gif" lazyload alt="image-20210926193703956"></p>
<p>化整为零，避免了全内存扫描嗷！！！相当于把垃圾回收的基本单位变小了orz，粒度小了，并发度就高了嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926194304.png" srcset="/img/loading.gif" lazyload alt="image-20210926193946667"></p>
<p>大的对象，也可以通过紧凑的方法来腾出空间，边清理，边内存整理，当然效率高哇！！！</p>
<ul>
<li><p>G1分为了四个区嗷：</p>
<ul>
<li>Eden区</li>
<li>Survivor区</li>
<li>Old区</li>
<li>Humongou大对象区</li>
</ul>
</li>
<li><p>垃圾回收流程：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926194412.png" srcset="/img/loading.gif" lazyload alt="image-20210926194411751"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926194432.png" srcset="/img/loading.gif" lazyload alt="image-20210926194432326"></p>
<p>G1中的内存处于一个动态变化的过程中嗷！！！有点像分页算法？？？？？？？这种熟悉的感觉，emmmmmm</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926194520.png" srcset="/img/loading.gif" lazyload alt="image-20210926194519537"></p>
<p>回收步骤倒是和CMS一模一样，这不就和HashTable和ConcurrentHashMap一样嘛orz，对于每一个小块，采用的都是同样的CMS算法嗷！！！</p>
<ul>
<li>好多参数嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926195230.png" srcset="/img/loading.gif" lazyload alt="image-20210926195229637"></p>
<p>这些都可以尝试着看一下哈！！！一般都是用默认值的嗷！！！</p>
<h3 id="G1和CMS相比的优势"><a href="#G1和CMS相比的优势" class="headerlink" title="G1和CMS相比的优势"></a>G1和CMS相比的优势</h3><ol>
<li>G1没有内存碎片嗷！！！</li>
<li>G1可以精确控制停顿嗷！！！</li>
</ol>
<h2 id="JVMGC-SpringBoot微服务部署"><a href="#JVMGC-SpringBoot微服务部署" class="headerlink" title="JVMGC + SpringBoot微服务部署"></a>JVMGC + SpringBoot微服务部署</h2><ul>
<li><p>JVMGC –&gt; 调优 –&gt; 应用于微服务</p>
</li>
<li><p>步骤：</p>
<ol>
<li>IDEA开发完成微服务工程</li>
<li>maven进行clean和package</li>
<li>微服务启动的时候，同时配置我们JVM / GC的调优参数：<ul>
<li>内</li>
<li>外 =&gt; 中带你</li>
</ul>
</li>
<li>公式：<code>java -server jvm的各种参数 -jar jar/war包的名字</code></li>
</ol>
</li>
<li><p>示例：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926200212.png" srcset="/img/loading.gif" lazyload alt="image-20210926200212372"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926200313.png" srcset="/img/loading.gif" lazyload alt="image-20210926200313040"></p>
<h1 id="13-Linux相关"><a href="#13-Linux相关" class="headerlink" title="13. Linux相关"></a>13. Linux相关</h1><h2 id="生产环境服务器变慢了"><a href="#生产环境服务器变慢了" class="headerlink" title="生产环境服务器变慢了"></a>生产环境服务器变慢了</h2><h3 id="top："><a href="#top：" class="headerlink" title="top："></a>top：</h3><ul>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926201513.png" srcset="/img/loading.gif" lazyload alt="image-20210926201513031"></li>
<li>在top的情况下，按下<code>1</code>，就会显示所有的CPU的占用情况嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926202106.png" srcset="/img/loading.gif" lazyload alt="image-20210926202105515"></p>
<p>可以看到每个CPU的各种参数的使用情况嗷！！！</p>
<h3 id="uptime："><a href="#uptime：" class="headerlink" title="uptime："></a>uptime：</h3><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926202244.png" srcset="/img/loading.gif" lazyload alt="image-20210926202244709"></p>
<p>精简版的ps，uptime你值得拥有</p>
<h3 id="vmstat："><a href="#vmstat：" class="headerlink" title="vmstat："></a>vmstat：</h3><p><code>vmstat -n 2 3</code></p>
<ul>
<li>主要用于查看CPU，但是包含不限于嗷！！！</li>
<li>每2秒采样一次，共计采样3次</li>
</ul>
<figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">[root@VM-12-10-centos ~]# vmstat -n 2 3<br>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----<br> r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st<br> 3  1      0  76776 139660 1405012    0    0     0    29    2   12  1  0 99  0  0<br> 0  0      0  76272 139660 1405044    0    0     0    48 1145 2390  3  3 94  0  0<br> 1  0      0  76256 139660 1405060    0    0     0     0 1093 2187  0  0 100  0  0<br></code></pre></td></tr></tbody></table></figure>

<ul>
<li>头和尾的两个比较重要嗷！！！</li>
<li>r是run , b是block。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926202753.png" srcset="/img/loading.gif" lazyload alt="image-20210926202752052"></p>
<h3 id="mpstat："><a href="#mpstat：" class="headerlink" title="mpstat："></a>mpstat：</h3><ul>
<li><code>mpstat -P ALL 2</code></li>
</ul>
<p>每两秒采样一次，查看所有CPU的核信息：</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926203030.png" srcset="/img/loading.gif" lazyload alt="image-20210926203029814"></p>
<p>查看每个进程使用CPU的用量分解信息：</p>
<p><code>pidstat -u 1 -p 进程编号</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926203218.png" srcset="/img/loading.gif" lazyload alt="image-20210926203218298"></p>
<h3 id="free："><a href="#free：" class="headerlink" title="free："></a>free：</h3><ul>
<li><p>查看程序可用内存数</p>
</li>
<li><p><code>free -m</code>按照M来看，系统内存的可用数量</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926203425.png" srcset="/img/loading.gif" lazyload alt="image-20210926203425023"></p>
<ul>
<li><code>pidstat -p 进程号 -r 采样间隔秒数</code></li>
</ul>
<h3 id="df："><a href="#df：" class="headerlink" title="df："></a>df：</h3><ul>
<li><p>disk free，查看磁盘剩余空间数</p>
</li>
<li><p><code>df -h</code> 用人类看得懂的方式来告诉我们，可用的磁盘空间大小</p>
</li>
</ul>
<h3 id="ioStat："><a href="#ioStat：" class="headerlink" title="ioStat："></a>ioStat：</h3><ul>
<li><code>iostat</code>，查看磁盘IO，磁盘I/O性能评估</li>
<li><code>iostat -xdk 2 3</code></li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926204128.png" srcset="/img/loading.gif" lazyload alt="image-20210926204127348"></p>
<ul>
<li><code>pidstat -d 时间间隔 -p 进程号</code></li>
</ul>
<h3 id="ifstat："><a href="#ifstat：" class="headerlink" title="ifstat："></a>ifstat：</h3><ul>
<li>默认本地没有，要下载的嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926204426.png" srcset="/img/loading.gif" lazyload alt="image-20210926204425422"></p>
<h2 id="CPU占用过高，分析-定位？"><a href="#CPU占用过高，分析-定位？" class="headerlink" title="CPU占用过高，分析+定位？"></a>CPU占用过高，分析+定位？</h2><ul>
<li><p>Linux加上JDK共同分析</p>
</li>
<li><p>步骤：</p>
<ol>
<li>top命令找出惹事儿的Java程序，记录它的id</li>
<li>ps -ef | grep 进程号或者 jps 进一步定位，得知怎样的后台程序在惹事儿</li>
<li>定位到具体的<strong>线程</strong>或者<strong>代码：</strong></li>
</ol>
<p><strong><code>ps -mp 进程 -o THREAD,tid,time</code></strong></p>
<p>tid是哪一个线程，time是某个线程已经耗费的时间</p>
<p>参数解释：</p>
<ul>
<li>-m显示所有的线程</li>
<li>-p pid进程使用cpu的时间</li>
<li>-o 该参数后面是用户自定义格式</li>
</ul>
<ol start="4">
<li>将需要的<strong>线程ID</strong>转换为<strong>16进制格式</strong>（英文小写格式）</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926205055.png" srcset="/img/loading.gif" lazyload alt="image-20210926205054790"></p>
<p>或者手动算或用计算机算也成嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926205131.png" srcset="/img/loading.gif" lazyload alt="image-20210926205130839"></p>
<p>注意哈，机器内存里面全是小写嗷！！！</p>
<ol start="5">
<li><code>jstack 进程ID | grep tid（16进制线程id小写英文）-A60</code></li>
</ol>
<p>-A60是打印出前60行嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210926205849.png" srcset="/img/loading.gif" lazyload alt="image-20210926205848429"></p>
</li>
</ul>
<h1 id="14-Github骚操作"><a href="#14-Github骚操作" class="headerlink" title="14. Github骚操作"></a>14. Github骚操作</h1><h2 id="常用词："><a href="#常用词：" class="headerlink" title="常用词："></a>常用词：</h2><ul>
<li>watch：持续获得某个项目更新的通知嗷</li>
<li>fork：复制某个项目到自己的仓库中</li>
<li>star：项目点赞数</li>
<li>clone：把项目下载到你本地</li>
<li>follow：关注感兴趣的作者，会收到他们的动态</li>
</ul>
<h2 id="具体骚操作："><a href="#具体骚操作：" class="headerlink" title="具体骚操作："></a>具体骚操作：</h2><h3 id="In关键词限制搜索范围："><a href="#In关键词限制搜索范围：" class="headerlink" title="In关键词限制搜索范围："></a>In关键词限制搜索范围：</h3><ul>
<li><p>公式：<code>xxx关键词 in:name 或 description 或 readme</code></p>
</li>
<li><p>例如<code>seckill in:name</code>，项目的名字中必须有seckill这个关键字嗷！！！</p>
</li>
<li><p>组合使用：<code>seckill in:name,description</code></p>
</li>
</ul>
<h3 id="stars或fork项目查找项目："><a href="#stars或fork项目查找项目：" class="headerlink" title="stars或fork项目查找项目："></a>stars或fork项目查找项目：</h3><ul>
<li>公式：<code>xxx关键字 stars 通配符</code><ul>
<li>例如<code>:&gt; 或者 :&gt;=</code></li>
<li>区间范围数字：<code>数字1...数字2</code></li>
</ul>
</li>
<li>例如：<code>springboot stars:&gt;=5000</code></li>
<li>例如：<code>springboot forks:&gt;=500</code></li>
<li>组合使用：<code>springboot forks:100..200 stars:2000..4000</code></li>
</ul>
<h3 id="awesome加强搜索："><a href="#awesome加强搜索：" class="headerlink" title="awesome加强搜索："></a>awesome加强搜索：</h3><ul>
<li>awesome系列一般是用来收集</li>
<li>查找官方收集的学习，工具，书籍类相关的项目</li>
<li>公式：<code>awesome 项目名字</code></li>
<li>例如：<code>awesome redis</code></li>
</ul>
<h3 id="高亮显示代码："><a href="#高亮显示代码：" class="headerlink" title="高亮显示代码："></a>高亮显示代码：</h3><ul>
<li><p>给别人指出关键代码的行数或者行号</p>
</li>
<li><p>公式：<code>项目对应代码的URL + #L + 数字</code></p>
</li>
<li><p>例如：<code>https://github.com/coding/.../killDao.java#L13</code></p>
</li>
<li><p>范围高亮：</p>
<p><code>项目对应代码的URL + #L + 数字 + - + L + 数字</code></p>
<p>例如：<code>https://github.com/coding/.../killDao.java#L13-L23</code></p>
</li>
</ul>
<h3 id="T搜索："><a href="#T搜索：" class="headerlink" title="T搜索："></a>T搜索：</h3><ul>
<li>项目内搜索</li>
<li>在项目主页按下小写字母t，这个快捷键就是项目中搜索嗷！！！</li>
<li><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210927102201.png" srcset="/img/loading.gif" lazyload alt="image-20210927102153357"></li>
<li>进入列表显示和搜索栏，可以列出项目中全部的文件，方便我们查找和检索阅读嗷！！！</li>
<li>还有好多好多快捷键嗷！！！</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.github.com/en/get-started/using-github/keyboard-shortcuts">github官网快捷键嗷！！！</a></p>
<h3 id="搜索某个地区的大佬："><a href="#搜索某个地区的大佬：" class="headerlink" title="搜索某个地区的大佬："></a>搜索某个地区的大佬：</h3><ul>
<li>公式：搜索栏中<code>location:beijing language:java</code></li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210927102957.png" srcset="/img/loading.gif" lazyload alt="image-20210927102956944"></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E5%A4%A7%E4%B8%89%E8%87%AA%E5%AD%A6/">#大三自学</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Java常问面试题总结与提高</div>
      <div>http://example.com/2021/08/05/java-da-han-chang-wen-mian-shi-ti/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Alexander Liu</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2021年8月5日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/08/12/nginx-xue-xi/" title="Nginx学习">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Nginx学习</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2021/07/24/spring-cloud-spring-cloud-alibaba/" title="Spring Cloud + Spring Cloud Alibaba">
                        <span class="hidden-mobile">Spring Cloud + Spring Cloud Alibaba</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  





  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.events.registerRefreshCallback(function() {
      if ('mermaid' in window) {
        mermaid.init();
      }
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
