<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Docker进阶 | 兔の博客</title><meta name="author" content="Alexander Liu"><meta name="copyright" content="Alexander Liu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="B站狂神说docker教程，这是Docker进阶课程，衔接于K8S之前嗷！！！">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker进阶">
<meta property="og:url" content="http://example.com/2021/08/19/docker-jin-jie/index.html">
<meta property="og:site_name" content="兔の博客">
<meta property="og:description" content="B站狂神说docker教程，这是Docker进阶课程，衔接于K8S之前嗷！！！">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210819205713.png">
<meta property="article:published_time" content="2021-08-19T12:48:48.000Z">
<meta property="article:modified_time" content="2021-08-21T11:18:27.000Z">
<meta property="article:author" content="Alexander Liu">
<meta property="article:tag" content="后端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210819205713.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2021/08/19/docker-jin-jie/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker进阶',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-08-21 19:18:27'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="兔の博客" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">134</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210819205713.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">兔の博客</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker进阶</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-19T12:48:48.000Z" title="发表于 2021-08-19 20:48:48">2021-08-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-21T11:18:27.000Z" title="更新于 2021-08-21 19:18:27">2021-08-21</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker进阶"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="B站狂神说docker教程，这是Docker进阶课程，衔接于K8S之前嗷！！！"><a href="#B站狂神说docker教程，这是Docker进阶课程，衔接于K8S之前嗷！！！" class="headerlink" title="B站狂神说docker教程，这是Docker进阶课程，衔接于K8S之前嗷！！！"></a>B站狂神说docker教程，这是Docker进阶课程，衔接于K8S之前嗷！！！</h1><span id="more"></span>

<ul>
<li>前置只是补充：</li>
</ul>
<ol>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41896265/article/details/108245264">Docker集群搭建实例</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1og4y1q7M4?p=39">SpringBoot在Docker中的部署实例</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/143109114">Dockerfile编写实例</a></li>
</ol>
<h1 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h1><h2 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h2><ul>
<li>Dockerfile   —&gt;   build   —&gt;   run，手动操作，单个容器嗷！！！</li>
<li>Compose轻松高效的管理容器，定义运行多个容器。</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210820211215.png" alt="image-20210820211207168"></p>
<ul>
<li>狂神的理解：<ul>
<li>Compose是Docker官方的开源项目，需要安装。</li>
<li>Dockerfile让程序在任何地方运行。多个容器就要多次run来安装。现在通过配置文件，可以配置它们之间的关系。</li>
<li>重要的概念：<ul>
<li>服务services：容器，应用，web , redis , mysql</li>
<li>项目project：一组关联的容器，wp等</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="安装："><a href="#安装：" class="headerlink" title="安装："></a>安装：</h2><ul>
<li>首先官网上有相应的地址和安装方式嗷，但是从github上拉下来，太慢了orz，可以上网查（评论区有），下载对应的github嗷！！！</li>
<li>安装和使用的示例建议遵循官网的例子嗷！！！</li>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/">Compose官网嗷！！！</a></li>
<li>Compose帮助我们自动生成了一个网络并将容器全部纳入到了这个网络之下。同时完成了网络打通的功能，各个网络之前能够通过服务名进行访问嗷！！！</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token string">"Containers"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">"0182740eadaf4282f6356a8728a3ecafef4dfced4ae379f071b6017efb7c3e81"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">"Name"</span><span class="token builtin class-name">:</span> <span class="token string">"composetest_redis_1"</span>,
                <span class="token string">"EndpointID"</span><span class="token builtin class-name">:</span> <span class="token string">"15e44f973a098e0dfef0ca25790a6e953fb18ac6d9b4c666c6ffe9f44d9bc661"</span>,
                <span class="token string">"MacAddress"</span><span class="token builtin class-name">:</span> <span class="token string">"02:42:ac:12:00:03"</span>,
                <span class="token string">"IPv4Address"</span><span class="token builtin class-name">:</span> <span class="token string">"172.18.0.3/16"</span>,
                <span class="token string">"IPv6Address"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>
            <span class="token punctuation">}</span>,
            <span class="token string">"241be1776b1a1a7a1d7da384e66bc24f5d5676cb30a9175b5421d31769a34b6d"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">"Name"</span><span class="token builtin class-name">:</span> <span class="token string">"composetest_web_1"</span>,
                <span class="token string">"EndpointID"</span><span class="token builtin class-name">:</span> <span class="token string">"cbd7e7e3ceac089f8b69c609ea7c60341f4f70e50100038f019e0620cec1b020"</span>,
                <span class="token string">"MacAddress"</span><span class="token builtin class-name">:</span> <span class="token string">"02:42:ac:12:00:02"</span>,
                <span class="token string">"IPv4Address"</span><span class="token builtin class-name">:</span> <span class="token string">"172.18.0.2/16"</span>,
                <span class="token string">"IPv6Address"</span><span class="token builtin class-name">:</span> <span class="token string">""</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="Yaml规则："><a href="#Yaml规则：" class="headerlink" title="Yaml规则："></a>Yaml规则：</h2><ul>
<li>docker-compose.yaml的核心：</li>
</ul>
<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># 三层</span>

<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">''</span> <span class="token comment">#版本</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span> <span class="token comment">#服务</span>
	<span class="token key atrule">服务一</span><span class="token punctuation">:</span> web
	<span class="token comment">#服务配置</span>
	<span class="token key atrule">images</span><span class="token punctuation">:</span>
	<span class="token key atrule">build</span><span class="token punctuation">:</span>
	<span class="token key atrule">network</span><span class="token punctuation">:</span>
	<span class="token key atrule">服务二</span><span class="token punctuation">:</span> redis
	<span class="token comment">#服务配置</span>
	<span class="token punctuation">...</span>
	<span class="token key atrule">服务三</span><span class="token punctuation">:</span> 
	<span class="token punctuation">...</span>
	
<span class="token comment">#其他配置，网路/卷，全局规则</span>
<span class="token key atrule">volumes</span><span class="token punctuation">:</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>能配置什么？怎么配置？参考文档：</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://docs.docker.com/compose/compose-file/compose-file-v3/">Yaml配置文件具体内容</a></p>
<h2 id="开源项目（博客）："><a href="#开源项目（博客）：" class="headerlink" title="开源项目（博客）："></a>开源项目（博客）：</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://docs.docker.com/samples/wordpress/">WordPress项目官方文档</a></p>
</li>
<li><p>步骤：</p>
<ol>
<li>下载项目（docker-compose.yaml）</li>
<li>如果需要文件，Dockerfile</li>
<li>文件准备齐全，一键启动项目</li>
</ol>
</li>
<li><p>前台启动 -&gt; 后台启动：</p>
<ul>
<li>docker -d</li>
<li>docker-compose -d</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-12-10-centos my_wordpress<span class="token punctuation">]</span><span class="token comment"># docker-compose up -d</span>
Starting my_wordpress_db_1 <span class="token punctuation">..</span>. <span class="token keyword">done</span>
Starting my_wordpress_wordpress_1 <span class="token punctuation">..</span>. <span class="token keyword">done</span>
<span class="token punctuation">[</span>root@VM-12-10-centos my_wordpress<span class="token punctuation">]</span><span class="token comment"># </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>把用户密码啊，之类的，都改好之后，一键启动就可以访问到WordPress主页面了。进行注册之后就能够正常使用嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821101712.png" alt="image-20210821101712070"></p>
<ul>
<li>Compose相当于一个集合体，将整个项目需要的依赖和依赖之间的关系都以配置文件的方式配置好，然后一键启动就可以完成对应的整个项目的成功运行嗷！！！</li>
</ul>
<h2 id="自己编写的项目上线："><a href="#自己编写的项目上线：" class="headerlink" title="自己编写的项目上线："></a>自己编写的项目上线：</h2><ul>
<li><p>本质上解答了我心中，如何在Java项目中表示项目中的某个依赖是Docker中的某个依赖的问题！！！</p>
</li>
<li><p>创建一个Java项目版本的计数器：</p>
<ol>
<li>创建项目</li>
<li>POM.xml</li>
<li>applicaton.yaml</li>
<li>主启动</li>
<li>业务类：</li>
</ol>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821103410.png" alt="image-20210821103410286"></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821103459.png" alt="image-20210821103459775"></p>
<ul>
<li><p>这个项目在本机是跑不起来的，因为我的本机（或者服务器上根本就没有这个host），所以不是常规的写服务器名称和端口号。这里的redis作为host，指的就是docker中提供的redis服务嗷！！！</p>
</li>
<li><p>Dockerfile的书写：</p>
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821105855.png" alt="image-20210821105855778"></p>
<ul>
<li>docker-compose.yml：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821110235.png" alt="image-20210821110235199"></p>
<p>这里就会发现我们定义的redis服务就叫做redis，当java -jar命令启动的时候，docker就能够根据host里面的host : redis去找到docker容器中的redis服务嗷！！！</p>
<ul>
<li><p>步骤：</p>
<ul>
<li>编写项目微服务</li>
<li>dockerfile构建镜像</li>
<li>docker-compose.yaml编排项目！</li>
<li>丢到服务器启动嗷！！！</li>
</ul>
</li>
<li><p>我们需要放入到Linux中的东西：</p>
<ul>
<li>通过Maven的package我们打的微服务的jar包</li>
<li>Dockerfile</li>
<li>docker-compose.yml</li>
</ul>
</li>
<li><p>如果上面的三个东西齐全，直接docker-compose up 就能够启动了嗷，可以使用Ctrl + C或者docker-compose down这种形式来关闭服务嗷！！</p>
</li>
<li><p>小结：</p>
<ul>
<li>未来项目只要有docker-compose文件，按照这个规则，启动编排容器</li>
</ul>
</li>
<li><p>狂神的课：</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1kv411q7Qc?p=7&amp;spm_id_from=pageDriver">里面是存在一些大问题的嗷！！！Debug过程很有学习价值嗷！！！</a></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821112210.png" alt="image-20210821112209938"></p>
<h1 id="Docker-Swarm："><a href="#Docker-Swarm：" class="headerlink" title="Docker Swarm："></a>Docker Swarm：</h1><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1kv411q7Qc?p=8&amp;spm_id_from=pageDriver">购买阿里云教程嗷！！！</a></p>
<ul>
<li>四台机器同步安装docker：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821113031.png" alt="image-20210821113030822"></p>
<p>以后在一个会话输入的命令，会自动同步到打开的所有会话嗷！！！</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.docker.com/develop/">配置所在网站</a>，在Run you app in production下面的Configure containers里面的Scale your app就有Swarm相关的内容嗷！！！</li>
</ul>
<h2 id="工作原理："><a href="#工作原理：" class="headerlink" title="工作原理："></a>工作原理：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821155249.png" alt="image-20210821155248337"></p>
<ul>
<li>上面用于操作的结点，至少要有3台嗷！！！</li>
</ul>
<h2 id="搭建集群实例："><a href="#搭建集群实例：" class="headerlink" title="搭建集群实例："></a>搭建集群实例：</h2><ul>
<li>swarm相关命令：</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># docker swarm --help</span>

Usage:  <span class="token function">docker</span> swarm COMMAND

Manage Swarm

Commands:
  ca          Display and rotate the root CA
  init        Initialize a swarm
  <span class="token function">join</span>        Join a swarm as a <span class="token function">node</span> and/or manager
  join-token  Manage <span class="token function">join</span> tokens
  leave       Leave the swarm
  unlock      Unlock swarm
  unlock-key  Manage the unlock key
  update      Update the swarm

Run <span class="token string">'docker swarm COMMAND --help'</span> <span class="token keyword">for</span> <span class="token function">more</span> information on a command.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>swarm init相关用法：</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># docker swarm --help</span>

Usage:  <span class="token function">docker</span> swarm COMMAND

Manage Swarm

Commands:
  ca          Display and rotate the root CA
  init        Initialize a swarm
  <span class="token function">join</span>        Join a swarm as a <span class="token function">node</span> and/or manager
  join-token  Manage <span class="token function">join</span> tokens
  leave       Leave the swarm
  unlock      Unlock swarm
  unlock-key  Manage the unlock key
  update      Update the swarm

Run <span class="token string">'docker swarm COMMAND --help'</span> <span class="token keyword">for</span> <span class="token function">more</span> information on a command.
<span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># docker swarm init --help</span>

Usage:  <span class="token function">docker</span> swarm init <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span>

Initialize a swarm

Options:
      --advertise-addr string                  Advertised address <span class="token punctuation">(</span>format: <span class="token operator">&lt;</span>ip<span class="token operator">|</span>interface<span class="token operator">&gt;</span><span class="token punctuation">[</span>:port<span class="token punctuation">]</span><span class="token punctuation">)</span>
      --autolock                               Enable manager autolocking <span class="token punctuation">(</span>requiring an unlock key to start a stopped manager<span class="token punctuation">)</span>
      --availability string                    Availability of the <span class="token function">node</span> <span class="token punctuation">(</span><span class="token string">"active"</span><span class="token operator">|</span><span class="token string">"pause"</span><span class="token operator">|</span><span class="token string">"drain"</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>default <span class="token string">"active"</span><span class="token punctuation">)</span>
      --cert-expiry duration                   Validity period <span class="token keyword">for</span> <span class="token function">node</span> certificates <span class="token punctuation">(</span>ns<span class="token operator">|</span>us<span class="token operator">|</span>ms<span class="token operator">|</span>s<span class="token operator">|</span>m<span class="token operator">|</span>h<span class="token punctuation">)</span> <span class="token punctuation">(</span>default 2160h0m0s<span class="token punctuation">)</span>
      --data-path-addr string                  Address or interface to use <span class="token keyword">for</span> data path traffic <span class="token punctuation">(</span>format: <span class="token operator">&lt;</span>ip<span class="token operator">|</span>interface<span class="token operator">&gt;</span><span class="token punctuation">)</span>
      --data-path-port uint32                  Port number to use <span class="token keyword">for</span> data path traffic <span class="token punctuation">(</span><span class="token number">1024</span> - <span class="token number">49151</span><span class="token punctuation">)</span>. If no value is <span class="token builtin class-name">set</span> or is <span class="token builtin class-name">set</span> to <span class="token number">0</span>, the default port <span class="token punctuation">(</span><span class="token number">4789</span><span class="token punctuation">)</span> is used.
      --default-addr-pool ipNetSlice           default address pool <span class="token keyword">in</span> CIDR <span class="token function">format</span> <span class="token punctuation">(</span>default <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      --default-addr-pool-mask-length uint32   default address pool subnet mask length <span class="token punctuation">(</span>default <span class="token number">24</span><span class="token punctuation">)</span>
      --dispatcher-heartbeat duration          Dispatcher heartbeat period <span class="token punctuation">(</span>ns<span class="token operator">|</span>us<span class="token operator">|</span>ms<span class="token operator">|</span>s<span class="token operator">|</span>m<span class="token operator">|</span>h<span class="token punctuation">)</span> <span class="token punctuation">(</span>default 5s<span class="token punctuation">)</span>
      --external-ca external-ca                Specifications of one or <span class="token function">more</span> certificate signing endpoints
      --force-new-cluster                      Force create a new cluster from current state
      --listen-addr node-addr                  Listen address <span class="token punctuation">(</span>format: <span class="token operator">&lt;</span>ip<span class="token operator">|</span>interface<span class="token operator">&gt;</span><span class="token punctuation">[</span>:port<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>default <span class="token number">0.0</span>.0.0:2377<span class="token punctuation">)</span>
      --max-snapshots uint                     Number of additional Raft snapshots to retain
      --snapshot-interval uint                 Number of log entries between Raft snapshots <span class="token punctuation">(</span>default <span class="token number">10000</span><span class="token punctuation">)</span>
      --task-history-limit int                 Task <span class="token function">history</span> retention limit <span class="token punctuation">(</span>default <span class="token number">5</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>具体操作：</p>
<ul>
<li>docker swarm init 初始化结点</li>
<li>docker swarm join加入一个结点：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821161225.png" alt="image-20210821161225306"></p>
<ul>
<li>获取令牌：</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> swarm join-token manager
<span class="token function">docker</span> swarm join-token worker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p>上面这两个命令是生成加入某个结点的指令的命令嗷，就是说，如果你想以Worker加入结点A，你就进入到结点A中，执行<code>docker swarm join-token worker</code>，然后复制A中的指令到B中执行，即可获得结果嗷！！！</p>
<ul>
<li>docker node ls：</li>
</ul>
<p>这个可以显示出所有的结点嗷！！！</p>
<ul>
<li>docker swarm leave：</li>
</ul>
<p>不用参数，这个就可以直接离开集群。</p>
</li>
</ul>
<h2 id="Raft协议："><a href="#Raft协议：" class="headerlink" title="Raft协议："></a>Raft协议：</h2><ul>
<li><p>协议内容：保证<strong>大多数结点存活</strong>才可以使用，只要&gt;1，集群至少要大于3台嗷！！！</p>
</li>
<li><p>双主双从：假设一个主节点挂了，另外一个主节点是否可以用？另外一个主节点就不可以用了嗷！！！</p>
</li>
</ul>
<p>并且，不可以用的结点复活之后，虽然还是管理结点，但是已经不是最大的老大了嗷！！！</p>
<ul>
<li>Worker节点就是工作的，管理节点才能执行操作的命令嗷！！！</li>
<li>worker就是工作的，管理节点操作！</li>
<li>三个管理结点，一台worker，一个管理结点报废了，其他还是可以使用的嗷！！！</li>
<li>十分简单：集群，可用！！！三个主节点，&gt;1台管理者存活才能使用嗷！！！Raft保证大多数结点存活才能使用哈！！！</li>
</ul>
<h2 id="集群创建服务（Docker-Service）："><a href="#集群创建服务（Docker-Service）：" class="headerlink" title="集群创建服务（Docker Service）："></a>集群创建服务（Docker Service）：</h2><ul>
<li>docker-compose up！启动一个单机的项目哈！！！</li>
<li>容器 ===&gt; 服务</li>
<li>redis = 3份！容器！集群：高可用，web -&gt; redis（3台，分布在不同的机器上嗷！）</li>
<li>容器的概念逐渐变为了服务，服务主逐渐又衍生出了副本。</li>
<li>Redis服务   —&gt;   10个服务，从dcoker-compose逐步演变为docker service嗷！！！</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># docker service --help</span>

Usage:  <span class="token function">docker</span> <span class="token function">service</span> COMMAND

Manage services

Commands:
  create      Create a new <span class="token function">service</span>
  inspect     Display detailed information on one or <span class="token function">more</span> services
  logs        Fetch the logs of a <span class="token function">service</span> or task
  <span class="token function">ls</span>          List services
  <span class="token function">ps</span>          List the tasks of one or <span class="token function">more</span> services
  <span class="token function">rm</span>          Remove one or <span class="token function">more</span> services
  rollback    Revert changes to a <span class="token function">service</span><span class="token string">'s configuration
  scale       Scale one or multiple replicated services
  update      Update a service

Run '</span><span class="token function">docker</span> <span class="token function">service</span> COMMAND --help' <span class="token keyword">for</span> <span class="token function">more</span> information on a command.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>拥有创建服务，动态拓展服务，动态更新服务等功能。</li>
<li>概念：<ul>
<li>灰度发布</li>
<li>金丝雀发布</li>
</ul>
</li>
<li>创建一个服务：</li>
</ul>
<p><code>docker service create -p 8080:80 --name my-nginx nginx</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821165003.png" alt="image-20210821165002947"></p>
<blockquote>
<p>docker run   容器启动！不具有扩缩容功能</p>
<p>docker service   具有扩缩容功能，滚动更新！！！</p>
</blockquote>
<ul>
<li>查看服务：</li>
</ul>
<blockquote>
<p>docker ps</p>
<p>docker service ps</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821165349.png" alt="image-20210821165348665"></p>
<ul>
<li>动态扩容：</li>
</ul>
<blockquote>
<p>docker service update –replicas 3 my-nginx</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821165639.png" alt="image-20210821165639725"></p>
<p>启动的微服务可以在集群中的结点中分布嗷！！！</p>
<p><strong>在集群的任何一台机子，都能够访问到这个服务，就算它上面没有跑服务。集群就是一个大的整体嗷！！！</strong></p>
<p>集群中的任意结点都可以访问，服务中有多个副本动态扩缩容来实现我们的高可用。例如上面，我们通过第一个服务名，成功复制出了若干个微服务副本跑在不同机器上，整体提供服务嗷！！！</p>
<ul>
<li>动态回滚到一个微服务：</li>
</ul>
<blockquote>
<p>docker service update –replicas 1 my-nginx</p>
</blockquote>
<ul>
<li>弹性和扩缩容的概念！服务端高可用和服务器的高可用。服务的高可用，任何企业，云！！！k8s！服务云原生运用嗷！！！</li>
<li>工作结点才能执行命令哈！！！</li>
<li>另外的扩缩容命令：</li>
</ul>
<blockquote>
<p>docker service scale my-nginx=5</p>
</blockquote>
<p>和我们更新副本数是一模一样的嗷！！！</p>
<ul>
<li>移除服务：</li>
</ul>
<blockquote>
<p>docker service rm my-nginx</p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821170530.png" alt="image-20210821170529865"></p>
<h2 id="概念总结："><a href="#概念总结：" class="headerlink" title="概念总结："></a>概念总结：</h2><p><strong>swarm</strong></p>
<p>集群的管理和编号，docker可以初始化一个swarm，其他节点可以加入。（Worker和Manager）</p>
<p><strong>Node</strong></p>
<p>就是一个docker节点，多个节点组成了网络集群（管理，工作者）</p>
<p><strong>Service</strong></p>
<p>任务，可以在管理节点或工作节点来运行，核心。</p>
<p><strong>Task</strong></p>
<p>容器内的命令，细节任务！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821170959.png" alt="image-20210821170959132"></p>
<ul>
<li>Service：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821171036.png" alt="image-20210821171036165"></p>
<ul>
<li>内部原理：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821171106.png" alt="image-20210821171105631"></p>
<ul>
<li>副本跑在哪儿？</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821173816.png" alt="image-20210821173816139"></p>
<p>如果工作结点不跑东西，可以让它在副本上跑嗷！！！</p>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821173909.png" alt="image-20210821173909342"></p>
<p>核心就是参数而已嘛！！！</p>
<h2 id="拓展（网络）："><a href="#拓展（网络）：" class="headerlink" title="拓展（网络）："></a>拓展（网络）：</h2><p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821174731.png" alt="image-20210821174731644"></p>
<ul>
<li>虽然Docker在四台机器上，实际网络是同一个嗷！！！</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821174850.png" alt="image-20210821174850013"></p>
<ul>
<li>虚拟网络技术：</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821175136.png" alt="image-20210821175136707"></p>
<p>分开的变成了一个集群整体嗷！！！</p>
<h1 id="其他技术："><a href="#其他技术：" class="headerlink" title="其他技术："></a>其他技术：</h1><h2 id="Docker-Stack"><a href="#Docker-Stack" class="headerlink" title="Docker Stack"></a>Docker Stack</h2><ul>
<li>docker-compose用于单机部署项目</li>
<li>Docker Stack用于集群部署</li>
</ul>
<blockquote>
<p>docker-compose up -d wordpress.yml</p>
<p>docker-stack up -d wordpress.yml</p>
</blockquote>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># docker stack</span>

Usage:  <span class="token function">docker</span> stack <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> COMMAND

Manage Docker stacks

Options:
      --orchestrator string   Orchestrator to use
                              <span class="token punctuation">(</span>swarm<span class="token operator">|</span>kubernetes<span class="token operator">|</span>all<span class="token punctuation">)</span>

Commands:
  deploy      Deploy a new stack or update an existing stack
  <span class="token function">ls</span>          List stacks
  <span class="token function">ps</span>          List the tasks <span class="token keyword">in</span> the stack
  <span class="token function">rm</span>          Remove one or <span class="token function">more</span> stacks
  services    List the services <span class="token keyword">in</span> the stack

Run <span class="token string">'docker stack COMMAND --help'</span> <span class="token keyword">for</span> <span class="token function">more</span> information on a command.
<span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># docker stack</span>

Usage:  <span class="token function">docker</span> stack <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> COMMAND

Manage Docker stacks

Options:
      --orchestrator string   Orchestrator to use <span class="token punctuation">(</span>swarm<span class="token operator">|</span>kubernetes<span class="token operator">|</span>all<span class="token punctuation">)</span>

Commands:
  deploy      Deploy a new stack or update an existing stack
  <span class="token function">ls</span>          List stacks
  <span class="token function">ps</span>          List the tasks <span class="token keyword">in</span> the stack
  <span class="token function">rm</span>          Remove one or <span class="token function">more</span> stacks
  services    List the services <span class="token keyword">in</span> the stack

Run <span class="token string">'docker stack COMMAND --help'</span> <span class="token keyword">for</span> <span class="token function">more</span> information on a command.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="Docker-Secret"><a href="#Docker-Secret" class="headerlink" title="Docker Secret"></a>Docker Secret</h2><ul>
<li>密码啊，证书的之类的</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># docker secret</span>

Usage:  <span class="token function">docker</span> secret COMMAND

Manage Docker secrets

Commands:
  create      Create a secret from a <span class="token function">file</span> or STDIN as content
  inspect     Display detailed information on one or <span class="token function">more</span> secrets
  <span class="token function">ls</span>          List secrets
  <span class="token function">rm</span>          Remove one or <span class="token function">more</span> secrets

Run <span class="token string">'docker secret COMMAND --help'</span> <span class="token keyword">for</span> <span class="token function">more</span> information on a command.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h2 id="Docker-Config"><a href="#Docker-Config" class="headerlink" title="Docker  Config"></a>Docker  Config</h2><ul>
<li>Docker对于容器的统一的一些配置嗷！！！</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># docker config</span>

Usage:  <span class="token function">docker</span> config COMMAND

Manage Docker configs

Commands:
  create      Create a config from a <span class="token function">file</span> or STDIN
  inspect     Display detailed information on one or <span class="token function">more</span> configs
  <span class="token function">ls</span>          List configs
  <span class="token function">rm</span>          Remove one or <span class="token function">more</span> configs

Run <span class="token string">'docker config COMMAND --help'</span> <span class="token keyword">for</span> <span class="token function">more</span> information on a command.
<span class="token punctuation">[</span>root@VM-12-10-centos ~<span class="token punctuation">]</span><span class="token comment"># </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>查什么docker config案例啊，例子啊，网上一大堆，看看示例就晓得了嗷！！！</li>
<li>学习方式：网上找案例试试嗷！！！然后查看帮助文档–help , 官网等</li>
</ul>
<h1 id="拓展到K8S"><a href="#拓展到K8S" class="headerlink" title="拓展到K8S"></a>拓展到K8S</h1><h2 id="云原生时代（大趋势）"><a href="#云原生时代（大趋势）" class="headerlink" title="云原生时代（大趋势）"></a>云原生时代（大趋势）</h2><ul>
<li><p>k8s，10台以上的集群嗷！！！</p>
</li>
<li><p>Go语言！必须掌握！！！</p>
<ul>
<li>Docker是Go开发的</li>
<li>K8S也是Go开发的</li>
<li>Etcd还是Go开发的</li>
</ul>
</li>
<li><p>本质上这里学习的就是从单机到集群的指令的迁移嗷，集群有自己单独的一套指令嗷！！！</p>
<ul>
<li>Docker   —&gt;   Docker Compose</li>
<li>Docker   —&gt;   Docker Swarm   ,   Docker Compose   —&gt;   Docker Stack等</li>
</ul>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Alexander Liu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2021/08/19/docker-jin-jie/">http://example.com/2021/08/19/docker-jin-jie/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">兔の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%90%8E%E7%AB%AF/">后端</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210819205713.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/08/21/mysql-shu-ju-ku-gao-ji/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210821192227.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">MySQL数据库高级</div></div></a></div><div class="next-post pull-right"><a href="/2021/08/16/redis-xue-xi/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210817091327.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Redis学习</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/05/19/docker-xue-xi/" title="Docker学习"><img class="cover" src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210819205713.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-19</div><div class="title">Docker学习</div></div></a></div><div><a href="/2021/08/25/elasticsearch-xue-xi/" title="ElasticSearch学习"><img class="cover" src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/cloudimg/img/20210825185001.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-25</div><div class="title">ElasticSearch学习</div></div></a></div><div><a href="/2021/03/16/jdbc-xue-xi/" title="JDBC学习"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-16</div><div class="title">JDBC学习</div></div></a></div><div><a href="/2021/04/21/jsp-xue-xi/" title="JSP学习"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-04-21</div><div class="title">JSP学习</div></div></a></div><div><a href="/2021/02/20/java-fu-xi/" title="Java大二上所学内容"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-20</div><div class="title">Java大二上所学内容</div></div></a></div><div><a href="/2021/03/01/maven-xue-xi/" title="Maven学习"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-01</div><div class="title">Maven学习</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Alexander Liu</div><div class="author-info__description">欢迎来到兔子的小窝，这里是兔子的一些笔记分享</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">134</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">18</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#B%E7%AB%99%E7%8B%82%E7%A5%9E%E8%AF%B4docker%E6%95%99%E7%A8%8B%EF%BC%8C%E8%BF%99%E6%98%AFDocker%E8%BF%9B%E9%98%B6%E8%AF%BE%E7%A8%8B%EF%BC%8C%E8%A1%94%E6%8E%A5%E4%BA%8EK8S%E4%B9%8B%E5%89%8D%E5%97%B7%EF%BC%81%EF%BC%81%EF%BC%81"><span class="toc-number">1.</span> <span class="toc-text">B站狂神说docker教程，这是Docker进阶课程，衔接于K8S之前嗷！！！</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-Compose"><span class="toc-number">2.</span> <span class="toc-text">Docker Compose</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B%EF%BC%9A"><span class="toc-number">2.1.</span> <span class="toc-text">简介：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%EF%BC%9A"><span class="toc-number">2.2.</span> <span class="toc-text">安装：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Yaml%E8%A7%84%E5%88%99%EF%BC%9A"><span class="toc-number">2.3.</span> <span class="toc-text">Yaml规则：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%EF%BC%88%E5%8D%9A%E5%AE%A2%EF%BC%89%EF%BC%9A"><span class="toc-number">2.4.</span> <span class="toc-text">开源项目（博客）：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%B7%B1%E7%BC%96%E5%86%99%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%8A%E7%BA%BF%EF%BC%9A"><span class="toc-number">2.5.</span> <span class="toc-text">自己编写的项目上线：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-Swarm%EF%BC%9A"><span class="toc-number">3.</span> <span class="toc-text">Docker Swarm：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%EF%BC%9A"><span class="toc-number">3.1.</span> <span class="toc-text">工作原理：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E9%9B%86%E7%BE%A4%E5%AE%9E%E4%BE%8B%EF%BC%9A"><span class="toc-number">3.2.</span> <span class="toc-text">搭建集群实例：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Raft%E5%8D%8F%E8%AE%AE%EF%BC%9A"><span class="toc-number">3.3.</span> <span class="toc-text">Raft协议：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9B%86%E7%BE%A4%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%EF%BC%88Docker-Service%EF%BC%89%EF%BC%9A"><span class="toc-number">3.4.</span> <span class="toc-text">集群创建服务（Docker Service）：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E5%BF%B5%E6%80%BB%E7%BB%93%EF%BC%9A"><span class="toc-number">3.5.</span> <span class="toc-text">概念总结：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%EF%BC%88%E7%BD%91%E7%BB%9C%EF%BC%89%EF%BC%9A"><span class="toc-number">3.6.</span> <span class="toc-text">拓展（网络）：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%8A%80%E6%9C%AF%EF%BC%9A"><span class="toc-number">4.</span> <span class="toc-text">其他技术：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-Stack"><span class="toc-number">4.1.</span> <span class="toc-text">Docker Stack</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-Secret"><span class="toc-number">4.2.</span> <span class="toc-text">Docker Secret</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-Config"><span class="toc-number">4.3.</span> <span class="toc-text">Docker  Config</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8B%93%E5%B1%95%E5%88%B0K8S"><span class="toc-number">5.</span> <span class="toc-text">拓展到K8S</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%91%E5%8E%9F%E7%94%9F%E6%97%B6%E4%BB%A3%EF%BC%88%E5%A4%A7%E8%B6%8B%E5%8A%BF%EF%BC%89"><span class="toc-number">5.1.</span> <span class="toc-text">云原生时代（大趋势）</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/12/07/cao-zuo-xi-tong-gai-shu/" title="1. 操作系统概述"><img src="https://cdn.jsdelivr.net/gh/alexanderliu-creator/blog_img/img/202212071136497.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="1. 操作系统概述"/></a><div class="content"><a class="title" href="/2022/12/07/cao-zuo-xi-tong-gai-shu/" title="1. 操作系统概述">1. 操作系统概述</a><time datetime="2022-12-07T03:35:42.000Z" title="发表于 2022-12-07 11:35:42">2022-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/12/05/cpu-cache-xue-xi/" title="CPU Cache 学习"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CPU Cache 学习"/></a><div class="content"><a class="title" href="/2022/12/05/cpu-cache-xue-xi/" title="CPU Cache 学习">CPU Cache 学习</a><time datetime="2022-12-05T04:14:46.000Z" title="发表于 2022-12-05 12:14:46">2022-12-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/01/16/ml-ru-men/" title="ML入门"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ML入门"/></a><div class="content"><a class="title" href="/2022/01/16/ml-ru-men/" title="ML入门">ML入门</a><time datetime="2022-01-16T11:11:14.000Z" title="发表于 2022-01-16 19:11:14">2022-01-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/28/da-shu-ju-fen-xi-yu-zhi-neng-ji-suan-qi-mo-fu-xi-3/" title="大数据分析与智能计算期末复习3"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大数据分析与智能计算期末复习3"/></a><div class="content"><a class="title" href="/2021/12/28/da-shu-ju-fen-xi-yu-zhi-neng-ji-suan-qi-mo-fu-xi-3/" title="大数据分析与智能计算期末复习3">大数据分析与智能计算期末复习3</a><time datetime="2021-12-28T14:05:22.000Z" title="发表于 2021-12-28 22:05:22">2021-12-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/12/24/da-shu-ju-fen-xi-yu-zhi-neng-ji-suan-qi-mo-fu-xi-2/" title="大数据分析与智能计算期末复习2"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大数据分析与智能计算期末复习2"/></a><div class="content"><a class="title" href="/2021/12/24/da-shu-ju-fen-xi-yu-zhi-neng-ji-suan-qi-mo-fu-xi-2/" title="大数据分析与智能计算期末复习2">大数据分析与智能计算期末复习2</a><time datetime="2021-12-24T07:59:54.000Z" title="发表于 2021-12-24 15:59:54">2021-12-24</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Alexander Liu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>